[{"content":"å•èŠ‚ç‚¹éƒ¨ç½² ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€å°ç‰©ç†è®¾å¤‡ï¼Œå®é™…å®‰è£…è¿‡ç¨‹å’Œå®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»ŸåŸºæœ¬ä¸€æ ·ï¼Œå®‰è£…åï¼š\né›†ç¾¤éƒ¨ç½² éœ€è¦è‡³å°‘2å°ç‰©ç†è®¾å¤‡ï¼Œæ²¡æœ‰æ¡ä»¶ï¼Œå…ˆä¸åšäº†ã€‚\n","date":"2025-05-27T22:46:37+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC%E4%BA%8C%E8%8A%82-pve%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/","title":"ç¬¬äºŒèŠ‚ PveèŠ‚ç‚¹éƒ¨ç½²"},{"content":"1. åŸºæœ¬ä»‹ç» Proxmox VEï¼ˆProxmox Virtual Environmentï¼‰ï¼Œå¥¥åœ°åˆ©ä¼ä¸šâ€œProxmox Server Solutions GnbHâ€å¼€å‘çš„è™šæ‹ŸåŒ–äº§å“ï¼ŒåŸºäºDebianï¼Œäº2008å¹´å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬ç¨³å®šç‰ˆProxmox VE 1.0ã€‚\n2. åŠŸèƒ½ç‰¹æ€§ æœåŠ¡å™¨è™šæ‹ŸåŒ– åŸºäºKVMæŠ€æœ¯æä¾›è™šæ‹ŸåŒ–æ”¯æŒï¼Œå¯ä»¥è¿è¡ŒLinuxå’ŒWindowsæ“ä½œç³»ç»Ÿã€‚\nLinuxå®¹å™¨ åŸºäºLXCæŠ€æœ¯æä¾›Linuxå®¹å™¨æ”¯æŒï¼Œé€šè¿‡PCT(Proxmox Container Tools)å°±å¯ä»¥ç›´æ¥ä½¿ç”¨Proxmox VEçš„å­˜å‚¨èµ„æºå’Œç½‘ç»œèµ„æºã€‚\nåŸºäºWebçš„ç®¡ç†\né€šè¿‡webç™»é™†å¯¹æœåŠ¡å™¨è¿›è¡Œç®¡ç†ï¼Œä¸éœ€è¦å®‰è£…å®¢æˆ·ç«¯è½¯ä»¶ã€‚\né«˜å¯ç”¨\nåŸºäºLinux HAæŠ€æœ¯ã€‚\nå»ä¸­å¿ƒåŒ–\nPrexmox VEåŸºäºæ•°æ®åº“è®¾è®¡äº†ä¸€ç§ä¸“ç”¨çš„æ–‡ä»¶ç³»ç»Ÿç”¨äºä¿å­˜é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿé€šè¿‡Corosyncå°†é…ç½®æ–‡ä»¶å®æ—¶å¤åˆ¶åˆ°PVEé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œä¸å†éœ€è¦éƒ¨ç½²ä¸€ä¸ªå•ç‹¬çš„ç®¡ç†ç«¯æœåŠ¡å™¨ï¼Œè¿™å°±æ˜¯PVEçš„å»ä¸­å¿ƒåŒ–è®¾è®¡ã€‚\né›†æˆCephåˆ†å¸ƒå¼å­˜å‚¨\né€šè¿‡Webç«¯å³å¯è¿è¡Œç®¡ç†Cephã€‚\né›†æˆå¤‡ä»½ä¸è¿˜åŸ\nä¼ä¸šçº§å¤‡ä»½\nProxomx Backup Serverä¸é›†æˆçš„å¤‡ä»½ä¸è¿˜åŸåŠŸèƒ½ç›¸æ¯”æ›´å¼ºå¤§ã€‚\né›†æˆé˜²ç«å¢™ é€šè¿‡Webé¡µé¢å¯¹è™šæ‹Ÿæœºä»¥åŠå®¹å™¨çš„ç½‘ç»œæµé‡è¿›è¡Œè¿‡æ»¤ã€‚\næ”¯æŒå¤šç§èº«ä»½è®¤è¯\nåŒ…æ‹¬Microsoftæ´»åŠ¨ç›®å½•ã€LDAPã€åŒå› ç´ èº«ä»½è®¤è¯ç­‰ç­‰ã€‚\n","date":"2025-05-27T21:55:22+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC%E4%B8%80%E8%8A%82-pve%E4%BB%8B%E7%BB%8D/","title":"ç¬¬ä¸€èŠ‚ PVEä»‹ç»"},{"content":" 1. åˆæ­¥è®¤è¯† 2. è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•° 3. è¿­ä»£å™¨ 4. æ’å…¥å…ƒç´  4.1. insertä¸emplace 4.2. emplace_hint 5. åˆ é™¤å…ƒç´  5.1. erase 6. è®¿é—®å…ƒç´  6.1. contains 6.2. find 7. ä¿®æ”¹å…ƒç´  7.1. extract 1. åˆæ­¥è®¤è¯† ç”±äºsetåº•å±‚æ˜¯çº¢é»‘æ ‘ï¼Œå› æ­¤setä¸­çš„å…ƒç´ å¿…é¡»æ”¯æŒæ¯”è¾ƒå¤§å°ï¼Œå¯¹äºè‡ªå®šä¹‰ç±»å‹éœ€è¦é‡è½½â€œ\u0026lt;â€ï¼Œæˆ–è€…è‡ªå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°å¹¶åœ¨åˆ›å»ºsetå¯¹è±¡æ—¶æŒ‡å®šã€‚\n1 2 3 4 5 template\u0026lt; class Key, class Compare = std::less\u0026lt;Key\u0026gt;, class Allocator = std::allocator\u0026lt;Key\u0026gt; \u0026gt; class set; ä»ç±»æœ¨æ¿çš„å£°æ˜æ¥çœ‹ï¼ŒCompareæ˜¯ç”¨äºå…ƒç´ æ¯”è¾ƒçš„å‡½æ•°ï¼ŒAllocatoræ˜¯åˆ†é…å™¨ï¼Œè¿™ä¸¤ä¸ªéƒ½æœ‰é»˜è®¤çš„å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¦‚ä¸‹åˆ›å»ºsetå¯¹è±¡ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # include \u0026lt;iostream\u0026gt; # include \u0026lt;set\u0026gt; int main() { /** * åˆå§‹åŒ–æ—¶ï¼Œå…ƒç´ é¡ºåºä¸é‡è¦ï¼Œsetä¼šè¿›è¡Œæ’åºï¼› * å…ƒç´ å¿…é¡»æ”¯æŒæ¯”è¾ƒå¤§å°ï¼Œsetä¼šå»é™¤é‡å¤å…ƒç´ ï¼› */ std::set\u0026lt;int\u0026gt; s{66, 99, 88}; for (auto ptr = s.begin(); ptr != s.end(); ++ptr) { std::cout \u0026lt;\u0026lt; *ptr \u0026lt;\u0026lt; std::endl; } } ä»£ç è¾“å‡º:\n1 2 3 66 99 88 ç”±äºsetåº•å±‚ä½¿ç”¨æ˜¯çº¢é»‘æ ‘ï¼Œå¹¶ä¸”ä»£ç è¾“å‡ºç»“æœä¸ºå‡åºï¼Œå› æ­¤setéå†æ–¹å¼ä¸ºä¸­åºéå†ã€‚\n2. è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 class Str { int x; } bool MyCompare(const Str \u0026amp;a, const Str \u0026amp;b) { return a.x \u0026lt; b.x; //a\u0026lt;bæ—¶è¿”å›true } int main() { std::set\u0026lt;Str, decltype(\u0026amp;MyCompare)\u0026gt; s{Str{Str{66}, Str{99}}, Compare}; } 3. è¿­ä»£å™¨ setè¿­ä»£å™¨æ‰€æŒ‡å‘çš„å¯¹è±¡æ˜¯constçš„ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡è¿­ä»£å™¨ä¿®æ”¹å…ƒç´ ã€‚\n4. æ’å…¥å…ƒç´  4.1. insertä¸emplace 1 2 3 4 5 6 int main() { std::set\u0026lt;Str, decltype(\u0026amp;MyCompare)\u0026gt; s{Str{Str{66}, Str{99}}, Compare}; s.insert(Str{88}}); s.emplace(77); } æ ¹æ®å‚æ•°æ¥çœ‹ï¼Œinsertæ˜¯å…ˆæ„é€ ä¸€ä¸ªStrå¯¹è±¡,ç„¶åæ‹·è´æˆ–è€…ç§»åŠ¨åˆ°sä¸­ï¼Œè€Œemplaceï¼Œç›´æ¥åœ¨sä¸­æ„é€ ä¸€ä¸ªStrå¯¹è±¡ã€‚\n4.2. emplace_hint 1 2 template\u0026lt; class... Args \u0026gt; iterator emplace_hint( const_iterator hint, Args\u0026amp;\u0026amp;... args ); é€šè¿‡hintå‚æ•°ï¼Œå‘Šè¯‰ç³»ç»Ÿï¼Œæ–°å…ƒç´ å¤§çº¦è¦æ’å…¥åˆ°é‚£é‡Œï¼Œå‚æ•°\u0026quot;Args\u0026amp;\u0026amp;\u0026hellip; args\u0026quot;ç”¨æ¥æ„é€ æ–°å…ƒç´ ï¼Œè¿™æ ·èƒ½å¤Ÿå‡å°‘æ¯”è¾ƒæ¬¡æ•°ï¼Œä½†æ˜¯è¦æ±‚hintå‡†ç¡®ï¼Œå¦‚æœhintä¸å‡†ç¡®ï¼Œå¯èƒ½å¯¼è‡´æ•ˆç‡æ›´ä½ã€‚\n5. åˆ é™¤å…ƒç´  5.1. erase 1 2 3 size_type erase( const Key\u0026amp; key ); // (constexpr since C++26) iterator erase( const_iterator pos ); // (since C++11) (constexpr since C++26) iterator erase( const_iterator first, const_iterator last ); // (since C++11) (constexpr since C++26) 6. è®¿é—®å…ƒç´  6.1. contains 1 2 3 4 bool contains( const Key\u0026amp; key ) const; // (since C++20) (constexpr since C++26) template\u0026lt; class K \u0026gt; bool contains( const K\u0026amp; x ) const; // (since C++20) (constexpr since C++26) å¦‚æœåŒ…å«å°±è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚\n6.2. find 1 2 3 4 5 6 7 8 iterator find( const Key\u0026amp; key ); // (constexpr since C++26) const_iterator find( const Key\u0026amp; key ) const; // (constexpr since C++26) template\u0026lt; class K \u0026gt; iterator find( const K\u0026amp; x ); // (since C++14) (constexpr since C++26) template\u0026lt; class K \u0026gt; const_iterator find( const K\u0026amp; x ) const; // (since C++14) (constexpr since C++26) å¦‚æœæ‰¾åˆ°å…ƒç´ å°±è¿”å›è¯¥å…ƒç´ çš„è¿­ä»£å™¨ï¼Œå¦åˆ™è¿”å›end()ã€‚\n7. ä¿®æ”¹å…ƒç´  ç”±äºsetè¿­ä»£å™¨æ˜¯constçš„ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡è¿­ä»£å™¨ä¿®æ”¹å…ƒç´ ã€‚\n7.1. extract 1 2 3 4 5 6 node_type extract( const_iterator pos ); // (since C++17) (constexpr since C++26) node_type extract( const Key\u0026amp; k ); // (since C++17) (constexpr since C++26) template\u0026lt; class K \u0026gt; node_type extract( K\u0026amp;\u0026amp; x ); // (since C++23) (constexpr since C++26) ä½¿ç”¨æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 #include \u0026lt;algorithm\u0026gt; #include \u0026lt;iostream\u0026gt; #include \u0026lt;string_view\u0026gt; #include \u0026lt;set\u0026gt; void print(std::string_view comment, const auto\u0026amp; data) { std::cout \u0026lt;\u0026lt; comment; for (auto datum : data) std::cout \u0026lt;\u0026lt; \u0026#39; \u0026#39; \u0026lt;\u0026lt; datum; std::cout \u0026lt;\u0026lt; \u0026#39;\\n\u0026#39;; } int main() { std::set\u0026lt;int\u0026gt; cont{1, 2, 3}; print(\u0026#34;Start:\u0026#34;, cont); // Extract node handle and change key auto nh = cont.extract(1); nh.value() = 4; print(\u0026#34;After extract and before insert:\u0026#34;, cont); // Insert node handle back cont.insert(std::move(nh)); print(\u0026#34;End:\u0026#34;, cont); } ç¨‹åºè¾“å‡ºï¼š\n1 2 3 Start: 1 2 3 After extract and before insert: 2 3 End: 2 3 4 æ˜¾ç„¶ï¼Œextractç±»ä¼¼äºå…ˆeraseå†insertï¼Œä½†æ˜¯extractåˆ©ç”¨äº†å·²ç»åˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œçœå»äº†åˆ›å»ºå¯¹è±¡çš„å¼€é”€ã€‚\n","date":"2025-05-26T21:55:17+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC4%E8%8A%82-%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8%E4%B9%8Bset/","title":"ç¬¬4èŠ‚ - å…³è”å®¹å™¨ä¹‹Set"},{"content":"1. Arch é¦–å…ˆï¼Œæç®€çš„è¯´ï¼ŒDeskFlowçš„è·¨å¹³å°æŠ½è±¡å±‚å¦‚ä¸‹(å…ˆå¿½ç•¥ç±»æˆå‘˜)ï¼š 2. Archç±»è®¾è®¡ Archç±»æ˜¯å•ä¾‹ç±»ï¼Œä»–ä»¬è¿™ä¸ªå•ä¾‹æœ‰ç‚¹é—®é¢˜ï¼Œä½†æ˜¯äººå®¶ç¡®å®æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚\n2.1. Archç±»å£°æ˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 // arch.h class Arch : public ARCH_CONSOLE, public ARCH_DAEMON, public ARCH_LOG, public ARCH_MULTITHREAD, public ARCH_NETWORK, public ARCH_SLEEP, public ARCH_STRING, public ARCH_TIME { public: // æ„é€ å‡½æ•°æ˜¯publicçš„ï¼Œä½†æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œåé¢ä¼šåˆ†æ Arch(); Arch(Arch *arch); virtual ~Arch(); virtual void init(); static Arch *getInstance(); static void setInstance(Arch *s) { s_instance = s; } private: static Arch *s_instance; //é™æ€ç§æœ‰å•ä¾‹ }; 2.2. Archç±»å®ç° 1 Arch *Arch::s_instance = NULL; // ä¿„æ±‰æ¨¡å¼ï¼Œåˆå§‹åŒ–é™æ€ç§æœ‰å•ä¾‹ 2.3. å•ä¾‹æ„é€  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 Arch::Arch() { assert(s_instance == NULL); // åªèƒ½åˆ›å»ºä¸€ä¸ªArchå¯¹è±¡ s_instance = this; } // å±é™©çš„ä»£ç†æ„é€ ï¼Œå®é™…å¹¶æ²¡æœ‰ä½¿ç”¨ Arch::Arch(Arch *arch) { s_instance = arch; // å…è®¸å¤–éƒ¨æ¥ç®¡å®ä¾‹ } Arch::~Arch() { } åœ¨DeskFlowè½¯ä»¶ä¸­ï¼Œä¸ç®¡æ˜¯Clinetè¿˜æ˜¯Serverï¼Œéƒ½åªåœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ªArchå¯¹è±¡ï¼Œæ— ä»–ï¼Œä»£ç ä¹Ÿæ˜¯ä»…åœ¨DeskFlowå·¥ç¨‹å†…éƒ¨ä½¿ç”¨ï¼Œæ‰€ä»¥å°±æ˜¯publicä¹Ÿä¸å½±å“ã€‚\n2.4. å•ä¾‹åˆå§‹åŒ– 1 2 3 4 5 6 7 void Arch::init() { ARCH_NETWORK::init(); #if SYSAPI_WIN32 ArchMiscWindows::init(); #endif } 2.5. å•ä¾‹è®¿é—® 1 2 3 4 5 Arch *Arch::getInstance() { assert(s_instance != NULL); return s_instance; } 3. å•ä¾‹ä½¿ç”¨ 1 2 Arch arch; arch.init(); ","date":"2025-05-25T19:39:48+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC%E4%B8%89%E8%8A%82-deskflow%E8%B7%A8%E5%B9%B3%E5%8F%B0%E6%8A%BD%E8%B1%A1%E5%B1%82/","title":"ç¬¬ä¸‰èŠ‚ - DeskFlowè·¨å¹³å°æŠ½è±¡å±‚"},{"content":"åˆ†æ”¯ç®¡ç† masteråˆ†æ”¯:\nç”¨äºç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²ï¼Œä¸å…è®¸ç›´æ¥pushåˆ†æ”¯ï¼Œç”±releaseåˆ†æ”¯æˆ–è€…hotfixåˆ†æ”¯åˆå¹¶ã€‚ hotfixåˆ†æ”¯:\né’ˆå¯¹çº¿ä¸Šç´§æ€¥é—®é¢˜è¿›è¡Œä¿®å¤çš„åˆ†æ”¯ï¼Œä»¥masteråˆ†æ”¯ä¸ºåŸºçº¿åˆ›å»ºçš„ï¼Œä¿®å¤å®Œæˆååˆå¹¶åˆ°devåˆ†æ”¯ã€masteråˆ†æ”¯ã€‚ releaseåˆ†æ”¯:\né¢„å‘å¸ƒåˆ†æ”¯ï¼ŒUATæµ‹è¯•é˜¶æ®µä½¿ç”¨ï¼Œä¸€èˆ¬ç”±teståˆ†æ”¯æˆ–hitfixåˆ†æ”¯åˆå¹¶ã€‚ devåˆ†æ”¯:\nå¼€å‘åˆ†æ”¯ï¼Œæœ€æ–°ç‰ˆæœ¬è¿­ä»£ä»£ç ï¼ŒåŒ…æ‹¬bugä¿®å¤åçš„ä»£ç ã€‚ featureåˆ†æ”¯:\nåŸºäºdevåˆ†æ”¯åœ¨æœ¬åœ°åˆ›å»ºï¼Œæ¯ä¸ªå¼€å‘äººå‘˜çš„æœ¬åœ°åˆ†æ”¯ï¼Œé’ˆå¯¹å„è‡ªçš„åŠŸèƒ½è¿›è¡Œå¼€å‘ï¼Œå¼€å‘å®Œæˆåˆå¹¶åˆ°devåˆ†æ”¯ï¼Œå¹¶åˆ é™¤è¯¥fearureåˆ†æ”¯ï¼Œfeatureæ˜¯æ¯ä¸ªå¼€å‘äººå‘˜çš„æœ¬åœ°åˆ†æ”¯ï¼Œä¸å¯æ¨é€åˆ°è¿œç¨‹ï¼Œåªèƒ½åœ¨æœ¬åœ°åˆå¹¶åˆ°devåˆ†æ”¯ï¼Œç„¶åæ¨é€devåˆ†æ”¯ã€‚\n","date":"2025-05-25T17:04:00+08:00","permalink":"https://zuoco.github.io/p/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/","title":"è½¯ä»¶å¼€å‘ç‰ˆæœ¬ç®¡ç†"},{"content":" Hello-GitHub Open-GitHub ","date":"2025-05-25T14:22:52+08:00","permalink":"https://zuoco.github.io/p/%E8%B5%84%E6%BA%90/","title":"èµ„æº"},{"content":"FreeCAD - 1.0.1 https://github.com/FreeCAD/FreeCAD\nä¸‹é¢æ˜¯freecadçš„å¤šä¸ªrealeaseç‰ˆæœ¬ä»‹ç»: Windowså¹³å°ï¼š\n1 2 3 4 FreeCAD_1.0.1-conda-Windows-x86_64-installer-1.exe FreeCAD_1.0.1-conda-Windows-x86_64-installer-1.exe-SHA256.txt FreeCAD_1.0.1-conda-Windows-x86_64-py311.7z # ä¾¿æºå¼ FreeCAD_1.0.1-conda-Windows-x86_64-py311.7z-SHA256.txt å…¶ä¸­condaè¡¨ç¤ºè¯¥ç‰ˆæœ¬åŸºäº Conda åŒ…ç®¡ç†å™¨æ„å»ºï¼Œpy311è¡¨ç¤ºä¾èµ–Python-3.11ã€‚\nLinuxå¹³å°ï¼š\n1 2 3 FreeCAD_1.0.1-conda-Linux-x86_64-py311.AppImage FreeCAD_1.0.1-conda-Linux-x86_64-py311.AppImage-SHA256.txt FreeCAD_1.0.1-conda-Linux-x86_64-py311.AppImage.zsync å®‰è£… ä»¥Windowså¹³å°ä¸ºä¾‹ï¼š ä¸‹è½½FreeCAD_1.0.1-conda-Windows-x86_64-py311.7zï¼Œè§£å‹åï¼ŒFreeCAD_1.0.1\\bin\\freecad.exeå°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ã€‚ ","date":"2025-05-25T13:53:51+08:00","permalink":"https://zuoco.github.io/p/freecad%E5%AE%89%E8%A3%85/","title":"FreeCADå®‰è£…"},{"content":" ","date":"2025-05-21T23:41:24+08:00","permalink":"https://zuoco.github.io/p/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86-%E7%AC%AC1%E8%8A%82/","title":"å†…å­˜ç®¡ç† ç¬¬1èŠ‚"},{"content":"å®‰è£…vmstat 1 sudo dnf install sysstat # Fedora å¯ç”¨sysstatæœåŠ¡ 1 2 sudo systemctl start sysstat sudo systemctl enable sysstat æŸ¥çœ‹å†…å­˜ä¿¡æ¯ 1 sar -r 1 10 1 2 3 4 5 6 7 zcli@fedora:~/myBlog/notebooks$ sar -r 1 2 Linux 6.14.6-200.fc41.x86_64 (fedora) 2025å¹´05æœˆ21æ—¥ _x86_64_\t(16 CPU) 22æ—¶27åˆ†50ç§’ kbmemfree kbavail kbmemused %memused kbbuffers kbcached kbcommit %commit kbactive kbinact kbdirty 22æ—¶27åˆ†51ç§’ 21377908 26044624 5275184 16.41 5844 5071508 24039676 59.29 6736456 2538556 800 22æ—¶27åˆ†52ç§’ 21379140 26045856 5273952 16.40 5844 5071508 24039692 59.29 6736584 2538556 808 å¹³å‡æ—¶é—´: 21378524 26045240 5274568 16.40 5844 5071508 24039684 59.29 6736520 2538556 804 å­—æ®µå«ä¹‰ï¼š\nkbmemfreeï¼ˆç©ºé—²ç‰©ç†å†…å­˜ï¼‰\nç³»ç»Ÿå½“å‰æœªè¢«ä½¿ç”¨çš„ç‰©ç†å†…å­˜ï¼Œç›´æ¥å¯åˆ†é…ã€‚\nkbavailï¼ˆå¯ç”¨å†…å­˜ï¼‰\nåŒ…å«ç©ºé—²å†…å­˜å’Œå¯å›æ”¶çš„ç¼“å­˜/ç¼“å†²ï¼ˆå¦‚æ–‡ä»¶ç¼“å­˜ï¼‰ï¼Œåæ˜ å®é™…å¯åˆ†é…ç»™è¿›ç¨‹çš„å†…å­˜ã€‚\nkbmemusedï¼ˆå·²ç”¨å†…å­˜ï¼‰\nå†…æ ¸å’Œè¿›ç¨‹å·²å ç”¨çš„ç‰©ç†å†…å­˜ï¼ˆä¸åŒ…å«ç¼“å­˜/ç¼“å†²ï¼‰ã€‚\n%memusedï¼ˆå†…å­˜ä½¿ç”¨ç‡ï¼‰ ç‰©ç†å†…å­˜ä½¿ç”¨ç‡è¾ƒä½ï¼Œç³»ç»Ÿå†…å­˜å‹åŠ›å°ã€‚\nkbbuffersï¼ˆç¼“å†²åŒºå†…å­˜ï¼‰ å†…æ ¸ç¼“å†²åŒºç”¨äºä¸´æ—¶å­˜å‚¨ç£ç›˜å—æ•°æ®ï¼ˆå¦‚æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®ï¼‰ã€‚\nkbcachedï¼ˆç¼“å­˜å†…å­˜ï¼‰ æ–‡ä»¶ç¼“å­˜ï¼ŒåŠ é€Ÿæ–‡ä»¶è®¿é—®ï¼Œå¯è¢«å¿«é€Ÿå›æ”¶ä¾›è¿›ç¨‹ä½¿ç”¨ã€‚\nkbcommitï¼ˆæäº¤å†…å­˜æ€»é‡ï¼‰\nå½“å‰ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹ç”³è¯·çš„å†…å­˜æ€»å’Œï¼ˆåŒ…æ‹¬ç‰©ç†å†…å­˜å’Œäº¤æ¢ç©ºé—´ï¼‰ã€‚\n%commitï¼ˆæäº¤å†…å­˜å æ¯”ï¼‰ æäº¤å†…å­˜å æ€»ç‰©ç†å†…å­˜+äº¤æ¢ç©ºé—´çš„59%ï¼Œæ— å†…å­˜è€—å°½é£é™©ã€‚\nkbactiveï¼ˆæ´»è·ƒå†…å­˜ï¼‰\nè¿‘æœŸè¢«é¢‘ç¹è®¿é—®çš„å†…å­˜é¡µï¼ˆå¦‚è¿›ç¨‹ä»£ç ã€æ•°æ®ï¼‰ã€‚\nkbinactï¼ˆéæ´»è·ƒå†…å­˜ï¼‰\né•¿æ—¶é—´æœªä½¿ç”¨çš„å†…å­˜é¡µï¼Œå¯è¢«å›æ”¶ï¼ˆå¦‚ç¼“å­˜æ—§æ–‡ä»¶ï¼‰ã€‚\nkbdirtyï¼ˆè„é¡µï¼‰\néœ€å†™å›ç£ç›˜çš„ä¿®æ”¹è¿‡çš„å†…å­˜é¡µï¼Œæ•°å€¼ä½è¯´æ˜I/Oå‹åŠ›å°ã€‚\næäº¤å†…å­˜ è„é¡µ ","date":"2025-05-21T22:01:50+08:00","permalink":"https://zuoco.github.io/p/vmstat/","title":"vmstat"},{"content":"1. ä»€ä¹ˆæ˜¯OOM åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œå†…å­˜ç®¡ç†ç³»ç»Ÿä¼šå›æ”¶å†…æ ¸ä¸­å¯ä»¥é‡Šæ”¾çš„å†…å­˜ï¼Œå½“å®åœ¨æ²¡æœ‰å†…å­˜å¯ç”¨çš„æ—¶å€™ï¼Œå°±ä¼šè¿›å…¥OOMï¼ˆOut of Memoryï¼‰çŠ¶æ€ï¼Œå†…å­˜ç®¡ç†ç³»ç»Ÿä¼šæ‰§è¡ŒOOM Killerï¼Œä¾æ®ä¸€å®šçš„è§„åˆ™æ€æ­»ä¸€äº›è¿›ç¨‹æ¥é‡Šæ”¾å†…å­˜ï¼Œå¯¹äºä¸ªäººPCæ¥è¯´ï¼Œè¿™éƒ½ä¸æ˜¯ä¸ªäº‹å„¿ï¼Œä½†å¯¹äºæœåŠ¡å™¨ï¼Œæœ‰å¯èƒ½å°±ä¼šå°†é‡è¦çš„ä¸šåŠ¡è¿›ç¨‹ç»™å¹²æ­»äº†ï¼Œæ‰€ä»¥æœ‰çš„æœåŠ¡å™¨ä¼šå°†sysctlçš„vm.panic_on_omcå‚æ•°è®¾ä¸º1ï¼Œå½“å‘ç”ŸOOMæ—¶å¼ºåˆ¶å…³é—­ç³»ç»Ÿï¼Œå¦‚æœè®¾ç½®ä¸º0(é»˜è®¤)ï¼Œåœ¨OOMæ—¶å°±ä¼šè¿è¡ŒOOM Killerã€‚\nOOM Killeræœºåˆ¶ OOM Killeræœºåˆ¶ä¾é ä¸¤ä¸ªå› ç´ é€‰æ‹©è¦æ€çš„è¿›ç¨‹ï¼Œoom_scoreå’Œoom_score_adjï¼Œå…¶ä¸­oom_scoreæ˜¯å†…æ ¸é€šè¿‡è¿›ç¨‹çš„å†…å­˜æ¶ˆè€—è®¡ç®—å‡ºæ¥çš„ï¼Œoom_score_adjï¼ˆå–å€¼-1000 ~ 1000ï¼‰æ˜¯ç”¨æˆ·ç”¨æ¥å¹²é¢„oomçš„ï¼ˆç”¨æˆ·æƒé‡ï¼‰ï¼Œå†…æ ¸ä¼šå‘oom_score + oom_score_adjå€¼æœ€é«˜çš„è¿›ç¨‹å‘é€å…³é—­ä¿¡å·ã€‚\noom Killerä»£ç  å†…æ ¸ä»£ç ï¼šlinux-6.14.6/mm/oom_kill.c\nOOMæ€æ‰‹ç®—æ³•çš„è¯„åˆ†æœºåˆ¶: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 long oom_badness(struct task_struct *p, unsigned long totalpages) { long points; long adj; // 1. æ’é™¤ä¸å¯æ€è¿›ç¨‹ if (oom_unkillable_task(p)) return LONG_MIN; p = find_lock_task_mm(p); if (!p) return LONG_MIN; // 2. è·å–ç”¨æˆ·æƒé‡ï¼Œå¹¶åˆ¤æ–­è¯¥è¿›ç¨‹æ˜¯å¦å¯æ€ adj = (long)p-\u0026gt;signal-\u0026gt;oom_score_adj; if (adj == OOM_SCORE_ADJ_MIN || test_bit(MMF_OOM_SKIP, \u0026amp;p-\u0026gt;mm-\u0026gt;flags) || in_vfork(p)) { task_unlock(p); return LONG_MIN; } // 3. åŸºç¡€è¯„åˆ† = ç‰©ç†å†…å­˜ + äº¤æ¢åˆ†åŒº + é¡µè¡¨å†…å­˜ points = get_mm_rss(p-\u0026gt;mm) + get_mm_counter(p-\u0026gt;mm, MM_SWAPENTS) + mm_pgtables_bytes(p-\u0026gt;mm) / PAGE_SIZE; task_unlock(p); // 4. å½’ä¸€åŒ–è°ƒæ•´å€¼ = OOMè¯„åˆ†è°ƒæ•´å€¼ * æ€»å†…å­˜/1000 adj *= totalpages / 1000; // 5. æœ€ç»ˆè¯„åˆ† points += adj; return points; } æŸ¥æ‰¾oomæœ€å¤§çš„è¿›ç¨‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 static void select_bad_process(struct oom_control *oc) { oc-\u0026gt;chosen_points = LONG_MIN; if (is_memcg_oom(oc)) mem_cgroup_scan_tasks(oc-\u0026gt;memcg, oom_evaluate_task, oc); else { struct task_struct *p; rcu_read_lock(); // å¦åˆ™éå†ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹ï¼Œé€šè¿‡oom_evaluate_taskè¯„ä¼°æ¯ä¸ªè¿›ç¨‹ï¼Œè‹¥è¿”å›trueåˆ™ç«‹å³åœæ­¢éå†ï¼ˆæ‰¾åˆ°å€™é€‰è¿›ç¨‹ï¼‰ for_each_process(p) if (oom_evaluate_task(p, oc)) break; rcu_read_unlock(); } } æ€æ­»è¿›ç¨‹ 1 2 3 4 static void oom_kill_process(struct task_struct *victim, const char *message) { // æ€æ­»è¿›ç¨‹ï¼Œå¤ªå¤šäº†ï¼Œå°±ä¸æ”¾äº† } /proc/sys/vm/oom_kill_allocating_task å†™å…¥1è¡¨ç¤ºä¼˜å…ˆæ€æ­»å¯¼è‡´å†…å­˜ä¸è¶³çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯é€‰æ‹©è¯„åˆ†æœ€é«˜çš„ä»»åŠ¡ã€‚\n","date":"2025-05-21T20:53:24+08:00","permalink":"https://zuoco.github.io/p/%E5%86%85%E6%A0%B8oom%E6%9C%BA%E5%88%B6/","title":"å†…æ ¸OOMæœºåˆ¶"},{"content":"å ä½ ","date":"2025-05-21T20:43:36+08:00","permalink":"https://zuoco.github.io/p/c-20%E5%85%B3%E9%94%AE%E5%AD%97/","title":"C++20å…³é”®å­—"},{"content":"å ä½å‘ ","date":"2025-05-21T20:39:47+08:00","permalink":"https://zuoco.github.io/p/ollama%E5%9F%BA%E7%A1%80/","title":"OllamaåŸºç¡€"},{"content":"MNN æ˜¯é˜¿é‡Œå·´å·´å¼€å‘çš„ä¸€æ¬¾æ¨ç†å¼•æ“ï¼ŒMNNå¯ä»¥å°†ä¸»æµè®­ç»ƒæ¡†æ¶çš„äº§ç‰©è½¬æ¢ä¸ºMNNæ¨¡å‹ï¼Œå¾—åˆ°æ¨¡å‹åå°±å¯ä»¥éƒ¨ç½²åˆ°ç«¯ä¾§ã€‚é«˜æ€§èƒ½ã€è½»é‡åŒ–ã€è·¨å¹³å°ï¼Œè¯´ç™½äº†å°±æ˜¯ç»™ç«¯ä¾§éƒ¨ç½²æçš„ï¼Œå¯ä»¥åœ¨æ‰‹æœºã€PCã€åµŒå…¥å¼ç³»ç»Ÿä¸Šè¿è¡Œï¼Œå‰é€”æ— é‡ã€‚\n","date":"2025-05-20T22:20:48+08:00","permalink":"https://zuoco.github.io/p/mnn/","title":"MNN"},{"content":"1. åŠ¨æ€åˆ†æ å°±æ˜¯æˆ‘ä»¬é¢å¯¹ç€æ­£åœ¨è¿è¡Œçš„Linuxç³»ç»Ÿï¼Œç„¶åé€šè¿‡ä¸€äº›å‘½ä»¤ï¼ŒæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å ç”¨å†…å­˜çš„æƒ…å†µã€‚\n1.1. pså‘½ä»¤æŸ¥çœ‹å†…å­˜ä½¿ç”¨é‡å¤§çš„è¿›ç¨‹ 1 ps -eo pid,comm,%mem --sort -%mem | head -n 10 å‚æ•°è§£é‡Šï¼š\n1 2 3 4 -eï¼šæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ã€‚ -oï¼šæ˜¾ç¤ºåˆ¶å®šçš„åˆ—ï¼Œpid(è¿›ç¨‹ID),comm(è¿›ç¨‹å),%mem(è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜ç™¾åˆ†æ¯”) --sort -%memï¼šæŒ‰ç…§å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯”é™åºæ’åºã€‚ head -n 10ï¼šæ˜¾ç¤ºå‰10è¡Œã€‚ 1.2. freeå‘½ä»¤ 1 2 3 4 zcli@fedora:~$ free -h total used free shared buff/cache available Mem: 30Gi 5.4Gi 21Gi 79Mi 4.4Gi 25Gi Swap: 8.0Gi 0B 8.0Gi 1 2 3 4 zcli@fedora:~$ free -m total used free shared buff/cache available Mem: 31400 5554 21799 86 4564 25845 Swap: 8191 0 8191 2. å†…æ ¸çš„OOMæœºåˆ¶ (åé¢ä¼šæ–‡ç« å•ç‹¬åˆ†æoomæœºåˆ¶ï¼Œè¿™é‡Œç®€å•ä»‹ç»)OOMï¼ˆOut of Memoryï¼‰\næœºåˆ¶æ˜¯ä¸ºäº†åº”å¯¹ç³»ç»Ÿå†…å­˜è€—å°½çš„æƒ…å†µè€Œè®¾è®¡çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ã€‚å½“ç³»ç»Ÿå†…å­˜èµ„æºç´§å¼ åˆ°æ— æ³•ä¸ºæ–°çš„å†…å­˜åˆ†é…è¯·æ±‚æä¾›è¶³å¤Ÿçš„ç©ºé—´æ—¶ï¼ŒOOM Killerä¼šè¢«è§¦å‘ï¼Œä¾æ®ä¸€å®šçš„è§„åˆ™æ€æ‰ä¸€äº›è¿›ç¨‹æ¥é‡Šæ”¾å†…å­˜ã€‚\næŸ¥è¯¢OOMäº‹ä»¶ï¼š 1 $ dmesg | grep -i \u0026#34;out of memory\u0026#34; oom_scoreåˆ†æ•°ï¼š 1 2 3 4 zcli@fedora:/proc/11991$ ls -al | grep oom -rw-r--r--. 1 root root 0 5æœˆ20æ—¥ 22:34 oom_adj # æ–°çš„å†…æ ¸ä¸­å·²ç»å¼ƒç”¨ã€‚ -r--r--r--. 1 root root 0 5æœˆ20æ—¥ 22:34 oom_score # åªè¯»æ–‡ä»¶ï¼Œä¿å­˜äº†å½“å‰è¿›ç¨‹çš„oom_scoreåˆ†æ•°ã€‚ -rw-r--r--. 1 root root 0 5æœˆ20æ—¥ 22:34 oom_score_adj # ç”¨æˆ·è‡ªå®šä¹‰çš„oom_score_adjå€¼ï¼Œç”¨äºå¹²é¢„oom_scoreåˆ†æ•°çš„è®¡ç®—ã€‚ 3. æ£€æŸ¥å†…å­˜ç¢ç‰‡åŒ– ç›¸å…³ä¿¡æ¯ä½äºæ–‡ä»¶ä¸­ï¼š\n1 2 3 /proc/buddyinfo /proc/vmstat /proc/meminfo 3.1. buddyinfoæ–‡ä»¶ çœ‹ä¸€ä¸‹æ–‡ä»¶å†…å®¹ï¼š\n1 2 3 4 zcli@fedora:~$ cat /proc/buddyinfo Node 0, zone DMA 0 0 0 0 0 0 0 0 1 1 2 Node 0, zone DMA32 8 11 6 7 7 7 10 8 7 9 573 Node 0, zone Normal 1958 592 249 207 133 32 98 87 36 11 4422 æ¯ä¸€è¡Œçš„æ ¼å¼ä¸ºï¼š\n1 Node \u0026lt;node_id\u0026gt;, zone \u0026lt;zone_name\u0026gt; \u0026lt;order0\u0026gt; \u0026lt;order1\u0026gt; ... \u0026lt;order10\u0026gt; Node 0ï¼š è¡¨ç¤ºå•ä¸ª NUMA èŠ‚ç‚¹ï¼ˆæ—  NUMA æ¶æ„æ—¶ä»…ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚ zone \u0026lt;zone_name\u0026gt;ï¼šå†…å­˜åŒºåŸŸç±»å‹ï¼Œå¸¸è§ç±»å‹åŒ…æ‹¬ï¼š\nDMAï¼šç›´æ¥å†…å­˜è®¿é—®ï¼ˆDMAï¼‰åŒºåŸŸï¼Œç”¨äº 32 ä½è®¾å¤‡çš„å†…å­˜è®¿é—®ï¼ˆåœ°å€èŒƒå›´æœ‰é™ï¼‰ã€‚ DMA32ï¼šæ‰©å±•çš„ 32 ä½ DMA åŒºåŸŸï¼ˆåœ°å€èŒƒå›´æ¯” DMA æ›´å¹¿ï¼‰ã€‚ Normalï¼šæ™®é€šå†…å­˜åŒºåŸŸï¼Œç”¨äºå¤§å¤šæ•°å†…å­˜åˆ†é…ã€‚ \u0026lt;orderN\u0026gt;ï¼š\nè¡¨ç¤ºé˜¶ï¼ˆorderï¼‰ä¸º N çš„ç©ºé—²å†…å­˜å—æ•°é‡(Nä»0å¼€å§‹)ã€‚æ¯ä¸ªé˜¶çš„å†…å­˜å—å¤§å°ä¸º 2^N * PAGE_SIZEï¼ˆé€šå¸¸ PAGE_SIZE = 4KBï¼‰\nå¯¹äº32ä½çš„ç³»ç»Ÿ:\n1 2 3 DMA Normal HighMem # é«˜å†…å­˜åŒºï¼Œåœ¨32ä½ç³»ç»Ÿä¸Šç”¨äºæ‰©å±•å¯å¯»å€å†…å­˜èŒƒå›´ï¼Œå¯¹äº64ä½ç³»ç»Ÿï¼Œè¿™ä¸ªåŒºåŸŸå¯èƒ½ä¸å­˜åœ¨ã€‚ ç¢ç‰‡åŒ–åˆ¤æ–­:\nä½é˜¶ç©ºé—²å—è¶Šå¤šï¼Œé«˜é˜¶é˜¶ç©ºé—²å—è¶Šå°‘ä»£è¡¨å†…å­˜ç¢ç‰‡åŒ–è¶Šä¸¥é‡ã€‚\n3.2. /proc/vmstatæ–‡ä»¶ éƒ¨åˆ†å­—æ®µï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 nr_free_pages 718778ã€€#ã€€å½“å‰ç³»ç»Ÿä¸­ç©ºé—²ï¼ˆæœªåˆ†é…ï¼‰çš„ç‰©ç†é¡µé¢æ€»æ•°ã€‚æ¯ä¸ªé¡µé¢çš„å¤§å°é€šå¸¸æ˜¯ 4KBï¼Œä½†è¿™ä¹Ÿå–å†³äºå…·ä½“çš„ç³»ç»Ÿæ¶æ„ã€‚ pgalloc_dma 0 pgalloc_normal 10593690 # ä»æ™®é€šå†…å­˜åŒºï¼ˆNormal zoneï¼‰æˆåŠŸåˆ†é…çš„ç‰©ç†é¡µé¢æ€»æ•° pgalloc_high 72600886 pgsteal_dma 0 pgsteal_normal 26597 # å›æ”¶çš„é¡µé¢æ•°é‡ pgsteal_high 0 # ä¸º 0ï¼Œè¯´æ˜æ²¡æœ‰ä» HighMem å›æ”¶é¡µé¢ compact_stall 1 # è¡¨ç¤ºç”±å†…å­˜æ•´ç†æ“ä½œ,è€Œæš‚åœåˆ†é…å™¨ï¼ˆallocator stallsï¼‰çš„æ¬¡æ•°ã€‚ # å½“å†…æ ¸éœ€è¦åˆ†é…ä¸€ä¸ªè¾ƒå¤§çš„è¿ç»­å†…å­˜å—ä½†æ— æ³•ç«‹å³æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­é¡µé¢æ—¶ï¼Œå®ƒä¼šè§¦å‘å†…å­˜æ•´ç†æ“ä½œæ¥å°è¯•é‡ç»„å†…å­˜ï¼Œä½¿å¾—æ›´å¤šçš„è¿ç»­å†…å­˜å—å¯ç”¨ã€‚ # å¦‚æœè¿™ä¸ªè¿‡ç¨‹èŠ±è´¹çš„æ—¶é—´è¶…è¿‡äº†å†…æ ¸è®¾å®šçš„é˜ˆå€¼ï¼Œå°±ä¼šè®°å½•ä¸€æ¬¡ compact_stallã€‚ compact_fail 0 # è¡¨ç¤ºå†…å­˜æ•´ç†å¤±è´¥çš„æ¬¡æ•°ã€‚å³ä½¿è¿›è¡Œäº†å†…å­˜æ•´ç†ï¼Œæœ‰æ—¶ä¹Ÿå¯èƒ½æ— æ³•æ‰¾åˆ°è¶³å¤Ÿå¤§çš„è¿ç»­å†…å­˜å—æ¥æ»¡è¶³åˆ†é…è¯·æ±‚ã€‚ compact_success 0 # è¡¨ç¤ºå†…å­˜æ•´ç†æˆåŠŸçš„æ¬¡æ•°ã€‚å³é€šè¿‡å†…å­˜æ•´ç†æ“ä½œæˆåŠŸåˆ›å»ºäº†è¶³å¤Ÿå¤§çš„è¿ç»­å†…å­˜å—ï¼Œä»è€Œæ»¡è¶³äº†åˆ†é…è¯·æ±‚ã€‚ # æ—¢æ²¡æœ‰å¤±è´¥ï¼Œä¹Ÿæ²¡æœ‰æˆåŠŸï¼Œå¯èƒ½æ˜¯æ²¡æœ‰å¼€å¯å†…å­˜æ•´ç†åŠŸèƒ½ã€‚ allocstall_dma 0 # è¡¨ç¤ºæœ‰å‡ æ¬¡å› å†…å­˜åˆ†é…å¤±è´¥è€Œè¿›å…¥ stall çŠ¶æ€çš„æƒ…å†µã€‚ allocstall_dma32 0 allocstall_normal 0 allocstall_movable 0 allocstall_device 0 3.3. /proc/meminfo 1 2 3 4 5 6 7 8 9 10 MemTotal: 4005176 kBã€€# æ€»çš„ç‰©ç†å†…å­˜ MemFree: 2875924 kBã€€# å‰©ä½™å†…å­˜ Buffers: 40576 kBã€€Cached: 500332 kB SwapCached: 0 kB # 6. 32ä½ç³»ç»Ÿ HighTotal: 3143004 kBã€€# åŠ ä¸ŠLowTotalç­‰äºMemTotal, åœ¨64ä½ç³»ç»Ÿä¸­ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹æ€§ä¿ç•™çš„æ¦‚å¿µï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ„ä¹‰ä¸å¤§ã€‚ HighFree: 2140940 kB # åŠ ä¸ŠLowFreeç­‰äºMemFree LowTotal: 862172 kB # æ ‡è¯†ä½ç«¯å†…å­˜åŒºåŸŸçš„æ€»å®¹é‡ä¸º 862,172 KBï¼ˆçº¦ 842 MBï¼‰ã€‚ä½ç«¯å†…å­˜å¯ä»¥ç›´æ¥æ˜ å°„åˆ°å†…æ ¸åœ°å€ç©ºé—´ã€‚ LowFree: 734984 kB 3.4. 32ä½ç³»ç»Ÿçš„é«˜ä½å†…å­˜åˆ’åˆ† 3.4.1. 32ç³»ç»Ÿçš„å†…å­˜åˆ’åˆ† Low Memoryï¼šçº¦896MBï¼Œå†…æ ¸ç›´æ¥æ˜ å°„ã€‚ High Memoryï¼šå‰©ä½™çº¦3.1GBï¼Œéœ€åŠ¨æ€æ˜ å°„ã€‚\nLow Memoryï¼š\nå†…æ ¸å¯ä»¥ç›´æ¥æ˜ å°„åˆ°å…¶è™šæ‹Ÿåœ°å€ç©ºé—´çš„ç‰©ç†å†…å­˜ï¼ˆå³å†…æ ¸çš„ç›´æ¥æ˜ å°„åŒºï¼‰ï¼Œè¿™éƒ¨åˆ†ç‰©ç†å†…å­˜é€šè¿‡çº¿æ€§æ˜ å°„ï¼ˆå›ºå®šåç§»ï¼‰è½¬æ¢åˆ°å†…æ ¸è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¾‹å¦‚ï¼Œç‰©ç†åœ°å€0x00000000å¯¹åº”å†…æ ¸è™šæ‹Ÿåœ°å€0xC0000000ï¼ˆ3GBå¤„ï¼‰ã€‚è¿™éƒ¨åˆ†å†…å­˜æ— éœ€åŠ¨æ€æ˜ å°„(å†…æ ¸å¯ç›´æ¥è®¿é—®ï¼Œæ— éœ€é¡µè¡¨åˆ‡æ¢æˆ–ä¸´æ—¶æ˜ å°„)ï¼Œæœ€å¤š1GB(ä¸å†…æ ¸ç©ºé—´å¤§å°ä¸€è‡´)ï¼Œä½†å®é™…å—å†…æ ¸ä¿ç•™åŒºåŸŸï¼ˆå¦‚vmallocåŒºã€å›ºå®šæ˜ å°„åŒºç­‰ï¼‰å½±å“ï¼Œé€šå¸¸çº¦ä¸º896MBï¼Œç”¨äºå­˜æ”¾å†…æ ¸å…³é”®æ•°æ®ç»“æ„ï¼ˆå¦‚é¡µè¡¨ã€è¿›ç¨‹æè¿°ç¬¦ï¼‰ã€ä»£ç ã€DMAç¼“å†²åŒºç­‰å¿…é¡»å¸¸é©»å†…å­˜çš„å†…å®¹ã€‚\nHigh Memory:\nè¶…å‡ºå†…æ ¸ç›´æ¥æ˜ å°„åŒºï¼ˆLow Memoryï¼‰çš„ç‰©ç†å†…å­˜ï¼Œéœ€é€šè¿‡åŠ¨æ€æ˜ å°„æœºåˆ¶æ‰èƒ½è¢«å†…æ ¸è®¿é—®ï¼Œå½“ç‰©ç†å†…å­˜è¶…è¿‡1GBï¼ˆæˆ–å®é™…çº¦896MBï¼‰æ—¶ï¼Œé¢å¤–å†…å­˜å±äºHigh Memoryã€‚åŠ¨æ€å†…å­˜æ˜ å°„æœºåˆ¶åŒ…æ‹¬ï¼Œ(1)ä¸´æ—¶æ˜ å°„(kmap)ä½¿ç”¨kmap()å’Œkunmap()å‡½æ•°å°†High Memoryé¡µä¸´æ—¶æ˜ å°„åˆ°å†…æ ¸çš„â€œå›ºå®šæ˜ å°„åŒºâ€ï¼Œé€‚ç”¨äºçŸ­æ—¶é—´è®¿é—®ã€‚(2).æ°¸ä¹…æ˜ å°„(pkmap)é€šè¿‡kmap_atomic()åœ¨â€œæ°¸ä¹…æ˜ å°„åŒºâ€å»ºç«‹æ˜ å°„ï¼Œå¸¸ç”¨äºä¸­æ–­ä¸Šä¸‹æ–‡ç­‰ä¸å…è®¸é˜»å¡çš„åœºæ™¯ã€‚(3)vmallocåŒºï¼Œåˆ†é…éè¿ç»­çš„ç‰©ç†å†…å­˜ï¼Œæ˜ å°„åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œç”¨äºå¤§å—å†…å­˜è¯·æ±‚ã€‚High Memoryéœ€è¦åŠ¨æ€æ˜ å°„/è§£é™¤æ˜ å°„ï¼Œå­˜åœ¨æ€§èƒ½æŸè€—ã€‚ä¸»è¦æ˜¯ç”¨æˆ·è¿›ç¨‹åˆ†é…ç‰©ç†é¡µï¼ˆé€šè¿‡é¡µè¡¨æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´ï¼‰ï¼Œæˆ–å†…æ ¸ä¸´æ—¶è®¿é—®å¤§å†…å­˜ï¼ˆå¦‚æ–‡ä»¶ç¼“å­˜ï¼‰ç”¨åˆ°ã€‚\nç›¸å¯¹äº64ä½ç³»ç»Ÿï¼š\n64ä½åœ°å€ç©ºé—´è¿œå¤§äºç‰©ç†å†…å­˜éœ€æ±‚ï¼ˆå¦‚x86_64æ”¯æŒ48ä½è™šæ‹Ÿåœ°å€ï¼Œ256TBï¼‰ï¼Œç›´æ¥æ˜ å°„æ‰€æœ‰å†…å­˜ï¼Œå†…æ ¸å¯é€šè¿‡ç›´æ¥æ˜ å°„åŒºï¼ˆphysmapï¼‰çº¿æ€§æ˜ å°„å…¨éƒ¨ç‰©ç†å†…å­˜ï¼Œæ— éœ€High Memoryæ¦‚å¿µã€‚\n3.5. /proc/sys/vm/min_free_kbytes æ–‡ä»¶ä¸­çš„å€¼å®šä¹‰äº†åœ¨ç³»ç»Ÿä¸­åº”å§‹ç»ˆä¿æŒç©ºé—²çš„æœ€å°å†…å­˜é‡ï¼ˆä»¥KBä¸ºå•ä½ï¼‰ã€‚è¿™ä¸ªå‚æ•°å¯¹äºé˜²æ­¢å†…å­˜å®Œå…¨è€—å°½ï¼Œç¡®ä¿ç³»ç»Ÿå³ä½¿åœ¨é«˜è´Ÿè½½ä¸‹ä¹Ÿèƒ½å¹³ç¨³è¿è¡Œè‡³å…³é‡è¦ã€‚å½“å¯ç”¨å†…å­˜é™è‡³ min_free_kbytes è®¾ç½®çš„é˜ˆå€¼ä¹‹ä¸‹æ—¶ï¼ŒLinux å†…æ ¸çš„å†…å­˜å›æ”¶æœºåˆ¶ä¼šä¸»åŠ¨å°è¯•é‡Šæ”¾å†…å­˜ï¼Œä¾‹å¦‚é€šè¿‡å›æ”¶ç¼“å­˜æˆ–äº¤æ¢å‡ºä¸æ´»è·ƒçš„é¡µé¢åˆ°ç£ç›˜ã€‚\n4. å†…å­˜å‹ç¼©ï¼ˆæ•´ç†ï¼‰ å¦‚æœå†…å­˜ç¢ç‰‡åŒ–ä¸¥é‡ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´å†…å­˜å‹ç¼©ï¼ˆæ•´ç†ï¼‰çš„æ–¹å¼æ¥è§£å†³ï¼Œã€‚\n1 2 root@fedora:~# ls -al /proc/sys/vm/compact_memory --w-------. 1 root root 0 5æœˆ20æ—¥ 22:44 /proc/sys/vm/compact_memory # å†™å…¥1æˆ–0 0ï¼š ç¦æ­¢å†…å­˜æ•´ç†åŠŸèƒ½ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚ 1ï¼š å¯ç”¨å†…å­˜å‹ç¼©ï¼Œå¹¶è§¦å‘ä¸€æ¬¡å†…å­˜æ•´ç†æ“ä½œã€‚\nå¯ä»¥æ‰‹åŠ¨è§¦å‘å†…å­˜æ•´ç†æ“ä½œ(ä¸´æ—¶æªæ–½)ï¼š 1 echo 1 \u0026gt; /proc/sys/vm/compact_memory æˆ–è€…:\n1 sudo susctl vm.compact_memory=1 æ°¸ä¹…æªæ–½: å°†ä¸‹é¢å†…å®¹å†™å…¥/etc/sysctl.confæ–‡ä»¶ä¸­ï¼š\n1 vm.compact_memory=1 ç„¶åæ‰§è¡Œï¼š\n1 sudo sysctl -p ä½†æ˜¯è¦æ³¨æ„:\nå†…å­˜å‹ç¼©æ˜¯ä¸€ä¸ªåŒæ­¥ã€é˜»å¡å¼çš„æ“ä½œï¼Œä¼šå¢åŠ CPUå’ŒIOå¼€é”€ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒé¢‘ç¹ä½¿ç”¨ã€‚ å†…å­˜å‹ç¼©éœ€è¦å¯ç”¨å†…æ ¸CONFIG_COMPACTIONé€‰é¡¹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¯¥åŠŸèƒ½æ˜¯å¦å¯ç”¨ï¼š 1 grep CONFIG_COMPACTION /boot/config-$(uname -r) # è¾“å‡ºCONFIG_COMPACTION=yè¡¨ç¤ºå¯ç”¨äº†è¯¥åŠŸèƒ½ã€‚ ","date":"2025-05-20T00:18:27+08:00","permalink":"https://zuoco.github.io/p/%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E5%86%85%E5%AD%98%E7%9B%B8%E5%85%B3%E5%86%85%E6%A0%B8%E6%97%A5%E5%BF%97/","title":"å†…å­˜åˆ†æå¸¸ç”¨å·¥å…·ã€å†…å­˜ç›¸å…³å†…æ ¸æ—¥å¿—"},{"content":"1. AIæ¨¡å‹çš„æœ¬åœ°éƒ¨ç½² ä»¥Qwen32-14Bä¸ºä¾‹ã€‚\n2. ä¸»æœº ä¸»æœºï¼šå¤©é’¡ GEM12 Pro CPU: AMD Ryzen 7 PRO 8845HS å†…å­˜ï¼š32GB 3. ç³»ç»Ÿ å‘è¡Œç‰ˆï¼šFedora Linux 41 (Workstation Edition) å†… æ ¸ï¼š6.14.6-200.fc41.x86_64 4. æ˜¾å¡ NVIDIA GTX 5060 Ti 16GB\n5. æ˜¾å¡é©±åŠ¨å®‰è£… æ ¹æ®ä¸‹é¢ç½‘é¡µçš„æç¤ºé€‰æ‹©ç³»ç»Ÿç‰ˆæœ¬åï¼Œä¸‹æ–¹ä¼šç»™å‡ºå¯¹åº”çš„å®‰è£…è¿‡ç¨‹ï¼Œæ ¹æ®æŒ‡ç¤ºå®‰è£…å³å¯ã€‚ https://developer.nvidia.com/cuda-downloads?target_os=Linux\u0026target_arch=x86_64\u0026Distribution=Fedora\u0026target_version=41\u0026target_type=rpm_local å®‰è£…å®Œæˆåï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 zcli@fedora:~$ nvidia-smi Sun May 18 22:05:08 2025 +-----------------------------------------------------------------------------------------+ | NVIDIA-SMI 575.51.03 Driver Version: 575.51.03 CUDA Version: 12.9 | |-----------------------------------------+------------------------+----------------------+ | GPU Name Persistence-M | Bus-Id Disp.A | Volatile Uncorr. ECC | # ç¬¬ä¸€è¡Œæ ‡é¢˜ | Fan Temp Perf Pwr:Usage/Cap | Memory-Usage | GPU-Util Compute M. | # ç¬¬äºŒè¡Œæ ‡é¢˜ï¼Œå…¶ä¸­Perfè¡¨ç¤ºå½“å‰æ€§èƒ½çŠ¶æ€ï¼ˆP0 ~ P15ï¼ŒP0 æ˜¯æœ€é«˜æ€§èƒ½ï¼ŒP12/P15 æ˜¯èŠ‚èƒ½æ¨¡å¼ï¼‰ | | | MIG M. | # ç¬¬ä¸‰è¡Œæ ‡é¢˜ |=========================================+========================+======================| | 0 NVIDIA Graphics Device On | 00000000:01:00.0 On | N/A | # ç¬¬ä¸€è¡Œæ•°æ®ï¼Œå¯¹åº”ç¬¬ä¸€è¡Œæ ‡é¢˜ | 0% 47C P5 10W / 180W | 1346MiB / 16311MiB | 0% Default | # ç¬¬äºŒè¡Œæ•°æ®ï¼Œå¯¹åº”ç¬¬äºŒè¡Œæ ‡é¢˜ | | | N/A | # ç¬¬ä¸‰è¡Œæ•°æ®ï¼Œå¯¹åº”ç¬¬ä¸‰è¡Œæ ‡é¢˜ +-----------------------------------------+------------------------+----------------------+ +-----------------------------------------------------------------------------------------+ | Processes: | | GPU GI CI PID Type Process name GPU Memory | # è¿›ç¨‹åˆ—è¡¨ | ID ID Usage | |=========================================================================================| | 0 N/A N/A 36667 G /usr/bin/gnome-shell 393MiB | # å‡ ä¸ªä½¿ç”¨GPUè¿›ç¨‹çš„è¿›ç¨‹ä»¥åŠä½¿ç”¨çš„æ˜¾å­˜ | 0 N/A N/A 37509 C+G /usr/bin/ptyxis 73MiB | | 0 N/A N/A 37546 G /usr/bin/Xwayland 38MiB | | 0 N/A N/A 37828 G ...ess --variations-seed-version 207MiB | | 0 N/A N/A 38479 C+G /opt/microsoft/msedge/msedge 6MiB | | 0 N/A N/A 38542 G ...per --variations-seed-version 415MiB | | 0 N/A N/A 38747 G /usr/bin/clash-verge 2MiB | +-----------------------------------------------------------------------------------------+ 6. AIéƒ¨ç½²æ¡†æ¶ æ¨¡å‹åªæ˜¯ä¸€å †å‚æ•°ï¼Œéœ€è¦é€šè¿‡æ¨ç†å·¥å…·æ¥è¿è¡Œï¼Œæ¨ç†å·¥å…·å°†æ¨¡å‹å‚æ•°åŠ è½½åˆ°æ˜¾å­˜ä¸­ï¼Œå¹¶ä¾æ®è¾“å…¥çš„æ–‡å­—ç”Ÿæˆè¾“å‡ºã€‚\næˆ‘ä»¬æ¥ä¸‹æ¥è¦å®Œæˆ:\nå¤§æ¨¡å‹æ¡†æ¶éƒ¨ç½²(æ¨ç†å·¥å…·)ï¼Œä»¥Ollamaä¸ºä¾‹ï¼› æ¨¡å‹éƒ¨ç½²ï¼Œä»¥Qwen32-14Bä¸ºä¾‹ï¼› å‰ç«¯æ¥å…¥ï¼Œä»¥CherryStudioä¸ºä¾‹ï¼› 7. å®‰è£…ollama ç™»é™†ollamaå®˜ç½‘ï¼Œå‘ç°å®˜ç½‘ç›´æ¥ç»™å‡ºä¸€è¡Œå‘½ä»¤ï¼Œè¯¥å‘½ä»¤è‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…ollamaï¼š\n1 curl -fsSL https://ollama.com/install.sh | sh è¯¥å‘½ä»¤ä¼šä¸‹è½½ä¸€ä¸ªè„šæœ¬ï¼Œè¯¥è„šæœ¬ä½¿ç”¨curlå‘½ä»¤ä¸‹è½½ollamaå®‰è£…æ–‡ä»¶ï¼Œç„¶åå¹¶æ‰§è¡Œå®‰è£…æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªcurlå§‹ç»ˆä¸èƒ½è¿æ¥ç½‘ç»œï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨ä¸‹è½½å®‰è£…æ–‡ä»¶ï¼š\nç¬¬ä¸€æ­¥ï¼š ä¸‹è½½å®‰è£…è„šæœ¬ 1 curl -fsSL https://ollama.com/install.sh -o ollama_install.sh # ä¸‹è½½å®‰è£…è„šæœ¬ ç¬¬äºŒæ­¥ï¼š ä»å®‰è£…è„šæœ¬æŸ¥æ‰¾ä¸‹è½½é“¾æ¥ åœ¨æ‰“å¼€è¿™ä¸ªè„šæœ¬æœç´¢https://ollama.com/download/ollama-linux-ï¼Œæ‰¾åˆ°ç±»ä¼¼å¦‚ä¸‹ä»£ç ï¼š 1 2 3 4 status \u0026#34;Downloading Linux ${ARCH} bundle\u0026#34; curl --fail --show-error --location --progress-bar \\ \u0026#34;https://ollama.com/download/ollama-linux-${ARCH}.tgz${VER_PARAM}\u0026#34; | \\ $SUDO tar -xzf - -C \u0026#34;$OLLAMA_INSTALL_DIR\u0026#34; è¿™æ®µä»£ç å°±æ˜¯ä¸‹è½½ollamaå®‰è£…æ–‡ä»¶çš„ä»£ç ï¼Œå¹¶è§£å‹æ”¾åˆ°$OLLAMA_INSTALL_DIRç›®å½•ä¸‹ï¼Œå°±æ˜¯usr/local/ç›®å½•ï¼Œè‡³äºä¸‹è½½é“¾æ¥ï¼Œæ·»åŠ echo \u0026quot;https://ollama.com/download/ollama-linux-${ARCH}.tgz${VER_PARAM}\u0026quot;å‘½ä»¤ï¼Œç„¶åè¿è¡Œè„šæœ¬ï¼Œæ‰“å°å‡ºæ¥çš„é“¾æ¥å°±æ˜¯äº†ã€‚\nä¸‹è½½å®‰è£…æ–‡ä»¶\nå¤åˆ¶é“¾æ¥ç›´æ¥åˆ°æµè§ˆå™¨ä¸­ä¸‹è½½ï¼Œå¹¶å°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…ä¿å­˜åˆ°å’Œå®‰è£…è„šæœ¬ç›¸åŒç›®å½•ä¸‹ã€‚ 1 2 3 zcli@fedora:~$ ls -lh | grep ollama -rwxrwxrwx. 1 zcli zcli 13K 5æœˆ18æ—¥ 21:11 ollama_install.sh -rw-r--r--. 1 zcli zcli 1.6G 5æœˆ18æ—¥ 21:04 ollama-linux-amd64.tgz ä¿®æ”¹å®‰è£…è„šæœ¬\nå®šä½åˆ°ç¬¬äºŒæ­¥ä¸­ç»™å‡ºçš„ä»£ç ï¼š 1 2 3 4 status \u0026#34;Downloading Linux ${ARCH} bundle\u0026#34; curl --fail --show-error --location --progress-bar \\ \u0026#34;https://ollama.com/download/ollama-linux-${ARCH}.tgz${VER_PARAM}\u0026#34; | \\ $SUDO tar -xzf - -C \u0026#34;$OLLAMA_INSTALL_DIR\u0026#34; ä¿®æ”¹ä¸ºï¼š\n1 2 status \u0026#34;Downloading Linux ${ARCH} bundle\u0026#34; $SUDO tar -xzf ollama-linux-amd64.tgz -C \u0026#34;$OLLAMA_INSTALL_DIR\u0026#34; ä¹Ÿå°±æ˜¯ä¸curläº†ï¼Œç›´æ¥è§£å‹åˆ°æŒ‡å®šç›®å½•ã€‚\næ‰§è¡Œå®‰è£…è„šæœ¬ 1 2 3 4 5 6 7 8 9 10 11 12 13 zcli@fedora:~$ ./ollama_install.sh \u0026gt;\u0026gt;\u0026gt; Cleaning up old version at /usr/local/lib/ollama [sudo] zcli çš„å¯†ç ï¼š \u0026gt;\u0026gt;\u0026gt; Installing ollama to /usr/local \u0026gt;\u0026gt;\u0026gt; Downloading Linux amd64 bundle \u0026gt;\u0026gt;\u0026gt; Creating ollama user... \u0026gt;\u0026gt;\u0026gt; Adding ollama user to render group... \u0026gt;\u0026gt;\u0026gt; Adding ollama user to video group... \u0026gt;\u0026gt;\u0026gt; Adding current user to ollama group... \u0026gt;\u0026gt;\u0026gt; Creating ollama systemd service... \u0026gt;\u0026gt;\u0026gt; Enabling and starting ollama service... Created symlink \u0026#39;/etc/systemd/system/default.target.wants/ollama.service\u0026#39; â†’ \u0026#39;/etc/systemd/system/ollama.service\u0026#39;. \u0026gt;\u0026gt;\u0026gt; NVIDIA GPU installed. OKå®‰è£…å¥½äº†ï¼Œä½†æ˜¯æ³¨æ„äº†ï¼Œåœ¨linuxä¸Šï¼Œè¿™ä¸ªollamaæ˜¯ä¸€ä¸ªlinuxæœåŠ¡ï¼Œå®‰è£…åå°±è¿è¡Œèµ·æ¥äº†ï¼Œå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 zcli@fedora:~$ sudo systemctl status ollama.service â— ollama.service - Ollama Service Loaded: loaded (/etc/systemd/system/ollama.service; enabled; preset: disabled) Drop-In: /usr/lib/systemd/system/service.d â””â”€10-timeout-abort.conf, 50-keep-warm.conf Active: active (running) since Sun 2025-05-18 23:03:56 CST; 1min 31s ago Invocation: 2dbc0a03db1c4a08a17829fa4039bf63 Main PID: 43831 (ollama) Tasks: 13 (limit: 37474) Memory: 24.5M (peak: 40.9M) CPU: 248ms CGroup: /system.slice/ollama.service â””â”€43831 /usr/local/bin/ollama serve 8. AI æ¨¡å‹éƒ¨ç½² å› ä¸ºOllamaæœåŠ¡å·²ç»å¯åŠ¨äº†ï¼Œæ‰€ä»¥å°±ä¸å¿…å†æ¬¡è¿è¡Œollama serveå‘½ä»¤äº†ã€‚ç›´æ¥å¼€run(å¦‚æœè¿˜æ²¡æœ‰ä¸‹è½½å°±ä¼šå…ˆä¸‹è½½ï¼Œç­‰å¾…å³å¯)ï¼š\n1 2 3 4 5 6 7 8 9 10 11 zcli@fedora:~$ ollama run qwen3:14b pulling manifest pulling a8cc1361f314: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 9.3 GB pulling eb4402837c78: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 1.5 KB pulling d18a5cc71b84: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 11 KB pulling cff3f395ef37: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 120 B pulling 78b3b822087d: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 488 B verifying sha256 digest writing manifest success \u0026gt;\u0026gt;\u0026gt; Send a message (/? for help) å¥½äº†ï¼Œå¯ä»¥å¼€å§‹æé—®äº†ï¼ŒæŒ‰ç…§æƒ¯ä¾‹å…ˆHello Word:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; ä½ å¥½å‘€ï¼ \u0026lt;think\u0026gt; å¥½çš„ï¼Œç”¨æˆ·å‘æ¥â€œä½ å¥½å‘€ï¼â€ï¼Œæˆ‘éœ€è¦å‹å¥½å›åº”ã€‚é¦–å…ˆï¼Œè¦ä¿æŒäº²åˆ‡ï¼Œç”¨è¡¨æƒ…ç¬¦å·å¢åŠ æ¸©åº¦ã€‚ç„¶åï¼Œå¯ä»¥è¯¢é—®ç”¨æˆ·æ˜¯å¦éœ€è¦å¸®åŠ©ï¼Œä½†ä¸è¦æ˜¾å¾—å¤ªæ­£å¼ã€‚å¯èƒ½ç”¨æˆ·åªæ˜¯æ‰“æ‹›å‘¼ï¼Œ æ‰€ä»¥ç®€å•å›åº”å³å¯ï¼Œç•™å‡ºç©ºé—´è®©ç”¨æˆ·ç»§ç»­äº¤æµã€‚æ³¨æ„ç”¨è¯å£è¯­åŒ–ï¼Œé¿å…å¤æ‚å¥å­ã€‚æ£€æŸ¥æœ‰æ²¡æœ‰æ‹¼å†™é”™è¯¯ï¼Œç¡®ä¿å›å¤è‡ªç„¶ã€‚æœ€åï¼Œä¿æŒå¼€æ”¾æ€åº¦ï¼Œè®©ç”¨æˆ·çŸ¥é“æˆ‘éšæ—¶å‡†å¤‡å¸®åŠ©ä»– ä»¬ã€‚ \u0026lt;/think\u0026gt; ä½ å¥½å‘€ï¼ğŸ˜Š å¾ˆé«˜å…´è§åˆ°ä½ ï¼ä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·å‘€ï¼Ÿéœ€è¦æˆ‘å¸®å¿™åšç‚¹ä»€ä¹ˆå—ï¼Ÿ \u0026gt;\u0026gt;\u0026gt; Send a message (/? for help) æ­¤æ—¶çš„æ˜¾å­˜å ç”¨ï¼š11490MiB / 16311MiBï¼Œå•Šï¼Œè¿™ä¸ªï¼Œå—¯..ï¼Œåˆšåˆšå¥½ã€‚\næç¤ºï¼š\nollama run qwen3:14bä¼šä»OllamaæœåŠ¡æ‹‰å–æ¨¡å‹ï¼Œå›½å†…ç½‘ç»œå¯èƒ½ä¸å¤ªè¡Œï¼Œå¯ä»¥ä½¿ç”¨ollama run modelscope.cn/models/Qwen/Qwen3-14Bã€‚\n--verboseå‚æ•°ï¼š æ˜¾ç¤ºæ¨ç†è¿‡ç¨‹çš„è€—æ—¶æƒ…å†µ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 zcli@fedora:~$ ollama run qwen3:14b --verbose \u0026gt;\u0026gt;\u0026gt; è¥¿çº¢æŸ¿æ€ä¹ˆåƒï¼Ÿ \u0026lt;think\u0026gt; å—¯ï¼Œç”¨æˆ·é—®çš„æ˜¯â€œè¥¿çº¢æŸ¿æ€ä¹ˆåƒï¼Ÿâ€ï¼Œè¿™ä¸ªé—®é¢˜çœ‹èµ·æ¥æŒºç®€å•çš„ï¼Œä½†å…¶å®å¯èƒ½éœ€è¦æ›´æ·±å…¥çš„æ€è€ƒã€‚é¦–å…ˆï¼Œæˆ‘å¾—è€ƒè™‘ç”¨æˆ·å¯èƒ½çš„èƒŒæ™¯ã€‚ä»–ä»¬å¯èƒ½æ˜¯åˆšå¼€å§‹æ¥è§¦è¥¿çº¢æŸ¿ï¼Œæˆ–è€…æƒ³æ‰¾ ä¸€äº›æ–°çš„åƒæ³•ã€‚ä¹Ÿå¯èƒ½ä»–ä»¬ä¹‹å‰åƒè¿‡ï¼Œä½†æƒ³å°è¯•æ›´å¤šä¸åŒçš„åšæ³•ã€‚ ...... ...... # è¿™ä¸ªå°±ç•¥äº†å§ \u0026lt;/think\u0026gt; è¥¿çº¢æŸ¿ï¼ˆç•ªèŒ„ï¼‰æ˜¯ä¸€ç§éå¸¸ç™¾æ­çš„é£Ÿæï¼Œæ—¢å¯ä»¥ç›´æ¥ç”Ÿåƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¤šç§çƒ¹é¥ªæ–¹å¼åˆ¶ä½œæˆç¾å‘³ä½³è‚´ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„åƒæ³•å’Œä¸€äº›åˆ›æ„åšæ³•ï¼Œä¾›ä½ å‚è€ƒï¼š ...... ...... # è¿™ä¸ªä¹Ÿç•¥å§ æ ¹æ®ä½ çš„å£å‘³å’Œéœ€æ±‚ï¼Œå¯ä»¥çµæ´»é€‰æ‹©ä»¥ä¸Šåƒæ³•ï¼å¦‚æœéœ€è¦å…·ä½“èœè°±æˆ–æ­¥éª¤ï¼Œä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘å“¦ ğŸ˜Š # ä¸‹é¢çš„è¾“å‡ºæ˜¯é‡ç‚¹ total duration: 33.622874783s # æ€»è€—æ—¶33.6ç§’ load duration: 9.67421ms # æ¨¡å‹åŠ è½½è€—æ—¶9.67ms prompt eval count: 12 token(s) # è¾“å…¥æç¤ºï¼ˆpromptï¼‰çš„ token æ•°é‡ï¼Œè¾“å…¥æç¤ºè¯è¢«åˆ†è¯ä¸º 12 ä¸ª tokenã€‚ prompt eval duration: 25.738437ms # å¤„ç†è¿™ 12 ä¸ª token çš„æç¤ºè¯ç”¨äº†çº¦ 25.7 æ¯«ç§’ã€‚ prompt eval rate: 466.23 tokens/s # å¤„ç†è¾“å…¥æç¤ºçš„é€Ÿåº¦ï¼ˆtoken/sï¼‰ï¼Œé»˜è®¤å¯ç”¨ enable_thinking=Trueï¼ˆæ€è€ƒæ¨¡å¼ï¼‰ã€‚ eval count: 1278 token(s) # æ¨¡å‹ç”Ÿæˆè¾“å‡ºçš„ token æ€»æ•°ã€‚ eval duration: 33.587006893s # ç”Ÿæˆè¾“å‡ºçš„æ€»è€—æ—¶ï¼Œå æ€»è€—æ—¶çš„ 99.9%ï¼ˆtotal duration çš„ 33.62 ç§’ï¼‰ã€‚è¯´æ˜ç”Ÿæˆé˜¶æ®µæ˜¯æ€§èƒ½ç“¶é¢ˆã€‚ã€‚ eval rate: 38.05 tokens/s # ç”Ÿæˆè¾“å‡ºçš„é€Ÿåº¦ï¼ˆtoken/sï¼‰ï¼Œç”Ÿæˆé€Ÿåº¦è¾ƒæ…¢ï¼ˆ38 tokens/sï¼‰ï¼Œè¿™ä¸ 14B å‚æ•°é‡çš„ Dense æ¨¡å‹ç‰¹æ€§ä¸€è‡´ï¼Œ # Qwen3 çš„ MoE æ¨¡å‹ï¼ˆå¦‚ Qwen3-30B-A3Bï¼‰é€šè¿‡æ¿€æ´»éƒ¨åˆ†å‚æ•°ï¼ˆ30B æ€»å‚æ•°ï¼Œä»…æ¿€æ´» 3Bï¼‰å®ç°æ›´é«˜çš„ç”Ÿæˆé€Ÿåº¦ã€‚ æ¨¡å‹æ–‡ä»¶ä½äºç›®å½•ï¼š/usr/share/ollamaä¸‹ã€‚\n9. å‰ç«¯æ¥å…¥ Ollamaé»˜è®¤æ˜¯åœ¨11434ç«¯å£æä¾›æœåŠ¡ã€‚æ˜ç™½äº†è¿™ä¸ªå°±å¯ä»¥åˆ°www.cherry-ai.comä¸‹è½½Cherry Studioäº†ã€‚\nå®‰è£…å¥½åï¼Œé€‰æ‹©ã€è®¾ç½®ã€ï¼Œç„¶ååœ¨ã€è®¾ç½®ã€ä¸­é€‰æ‹©ã€Ollamaã€ï¼š\nç‚¹å‡»ã€æ·»åŠ ã€ï¼Œç„¶åå¡«å†™â€œæ¨¡å‹IDâ€ï¼Œâ€œæ¨¡å‹åç§°â€ï¼Œâ€œåˆ†ç»„åç§°â€ï¼Œè¿™äº›ä¿¡æ¯é€šè¿‡ollama listå‘½ä»¤è·å–ï¼Œæ³¨æ„äº†ï¼Œè¿™é‡Œçš„â€œæ¨¡å‹IDâ€æ˜¯ollama listå‘½ä»¤è¾“å‡ºçš„â€œNAMEâ€ï¼Œè€Œä¸æ˜¯ID,ç„¶åç‚¹å‡»å³ä¸Šè§’çš„â€œæ£€æµ‹â€ï¼Œæç¤ºâ€œè¿æ¥æˆåŠŸâ€å°±OKäº†ï¼Œè‡³äºAPIå¯†é’¥ï¼Œéšä¾¿å¡«ä¸ªä»€ä¹ˆå°±è¡Œï¼Œæœ€åå°†é»˜è®¤åŠ©æ‰‹çš„æ¨¡å‹è®¾ç½®ä¸ºæˆ‘ä»¬åˆšåˆšæ·»åŠ çš„æ¨¡å‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚\n10. æ•ˆæœå±•ç¤º ä»¥ä¸Šæ–‡æåˆ°çš„è¥¿çº¢æŸ¿é—®é¢˜ä¸ºä¾‹ï¼Œæˆ‘ä»¬è®©qwen3-14bè‡ªå·±è¯„ä»·è‡ªå·±æ€§èƒ½è¡¨ç°ï¼š\n","date":"2025-05-18T23:17:13+08:00","image":"https://zuoco.github.io/p/qwen3-14b%E9%83%A8%E7%BD%B2/AAA_hu_ddee986440f9159a.jpg","permalink":"https://zuoco.github.io/p/qwen3-14b%E9%83%A8%E7%BD%B2/","title":"Qwen3-14béƒ¨ç½²"},{"content":"1. EPOLLä»‹ç» EPOLLæ˜¯Linuxç‰¹æœ‰çš„I/Oå¤ç”¨å‡½æ•°ï¼Œå®ƒæŠŠç”¨æˆ·å…³å¿ƒçš„â€œæ–‡ä»¶æè¿°ç¬¦â€æ”¾åœ¨å†…æ ¸é‡Œé¢ä¸€ä¸ªäº‹ä»¶è¡¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´EPOLLéœ€è¦ä¸€ä¸ªâ€œæ–‡ä»¶æè¿°ç¬¦â€æ¥æ ‡è¯†å†…æ ¸ä¸­çš„è¿™ä¸ªäº‹ä»¶è¡¨ã€‚å¦å¤–EPOLLæœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šæ°´å¹³è§¦å‘(Level Triggeredï¼ŒLT)å’Œè¾¹ç¼˜è§¦å‘(Edge Triggeredï¼ŒET)ï¼ŒLTæ¨¡å¼æ˜¯EPOLLé»˜è®¤çš„å·¥ä½œæ¨¡å¼ï¼ŒEPOLLå’Œå¼‚æ­¥ï¼Œéé˜»å¡ç»“åˆä½¿ç”¨ã€‚\n2. EPOLLä½¿ç”¨ 2.1. åˆ›å»ºEPOLLå¯¹è±¡ 1 2 #include \u0026lt;sys/epoll.h\u0026gt; int epoll_create(int size); // sizeå‚æ•°æ²¡æœ‰æ„ä¹‰ã€‚ è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä»£è¡¨å†…æ ¸äº‹ä»¶è¡¨ã€‚\n2.2. æ“ä½œå†…æ ¸äº‹ä»¶è¡¨ 1 2 #include \u0026lt;sys/epoll.h\u0026gt; int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event); //æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›-1ï¼Œå¹¶è®¾ç½®errnoã€‚ epfdï¼šå†…æ ¸äº‹ä»¶è¡¨æ–‡ä»¶æè¿°ç¬¦ã€‚\nopï¼šæ“ä½œç±»å‹ã€‚\nfdï¼šè¦æ“ä½œçš„æ–‡ä»¶æè¿°ç¬¦ã€‚\neventï¼šæŒ‡å‘ epoll_event ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œç”¨äºæŒ‡å®šè¦æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤çš„äº‹ä»¶ã€‚\nå…¶ä¸­ï¼Œop(æ“ä½œç±»å‹)æœ‰ä¸‰ç§ï¼š\nEPOLL_CTL_ADDï¼šå¾€å†…æ ¸äº‹ä»¶è¡¨ä¸­æ·»åŠ äº‹ä»¶ã€‚ EPOLL_CTL_MODï¼šä¿®æ”¹äº‹ä»¶ã€‚ EPOLL_CTL_DELï¼šåˆ é™¤äº‹ä»¶ã€‚ å…¶ä¸­ï¼Œevent(å…³å¿ƒçš„äº‹ä»¶)çš„ç±»å‹æ˜¯struct epoll_eventï¼Œç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 struct epoll_event { __uint32_t events; // äº‹ä»¶ epoll_data_t data; // äº‹ä»¶æºå¸¦çš„ç”¨æˆ·æ•°æ® } events æ˜¯ä¸€ä¸ªä½å›¾ï¼Œæœ‰EPOLLINã€EPOLLOUTã€EPOLLETã€EPOLLONESHOTã€‚\ndata æ˜¯epoll_data_tç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªè”åˆä½“ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 typedef union epoll_data { void *ptr; int fd; uint32_t u32; uint64_t u64; } epoll_data_t; ç”±äºè¿™æ˜¯ä¸€ä¸ªè”åˆä½“ï¼Œæ‰€ä»¥è¿™å››ä¸ªæˆå‘˜ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨å…¶ä¸­çš„ä¸€ä¸ªã€‚\n2.3. ç­‰å¾…äº‹ä»¶ 1 2 #include \u0026lt;sys/epoll.h\u0026gt; int epoll_wait(int epfd, struct epoll_event *events, int maxevents, int timeout); epoll_waitåœ¨ä¸€æ®µè¶…æ—¶æ—¶é—´å†…ï¼Œç­‰å¾…ä¸€ç»„æ–‡ä»¶æè¿°ç¬¦ä¸Šçš„äº‹ä»¶ï¼Œè¿”å›å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡ã€‚\ntimeout: å‚æ•°æŒ‡å®šç­‰å¾…çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚å¦‚æœtimeoutä¸º-1ï¼Œåˆ™è¡¨ç¤ºæ— é™ç­‰å¾…ã€‚ maxevents: å‚æ•°æŒ‡å®šæœ€å¤šç­‰å¾…çš„äº‹ä»¶æ•°ï¼Œå¿…é¡»å¤§äº0ã€‚ epoll_waitæ£€æµ‹åˆ°äº‹ä»¶ï¼Œå°±ä¼šå°†æ‰€æœ‰çš„å°±ç»ªäº‹ä»¶ä»å†…æ ¸äº‹ä»¶è¡¨æ‹·è´åˆ°eventsæ•°ç»„ä¸­ï¼Œå¹¶è¿”å›å°±ç»ªäº‹ä»¶çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯è¯´eventä¸­çš„äº‹ä»¶éƒ½æ˜¯å°±ç»ªçš„ã€‚\n3. ETå’ŒLTæ¨¡å¼å¯¹æ¯” å¯¹äºSocketè¯»äº‹ä»¶ï¼Œåªè¦Socketä¸Šçš„æ•°æ®æ²¡æœ‰è¯»å®Œï¼Œå°±ä¼šä¸€ç›´è§¦å‘EPOLLäº‹ä»¶ï¼Œè€Œå¯¹äºETæ¨¡å¼ï¼ŒSocketä¸Šæ¯æ¥ä¸€æ¬¡æ•°æ®å°±ä¼šè§¦å‘ä¸€æ¬¡EPOLLINäº‹ä»¶ï¼Œå¦‚æœä¸Šä¸€æ¬¡è§¦å‘åï¼Œæœªå°† socket ä¸Šçš„æ•°æ®è¯»å®Œï¼Œä¹Ÿä¸ä¼šå†è§¦å‘ï¼Œé™¤éå†æ–°æ¥ä¸€æ¬¡æ•°æ®ã€‚å¯¹äº socket å†™äº‹ä»¶ï¼Œå¦‚æœ socket çš„ TCP çª—å£ä¸€ç›´ä¸é¥±å’Œï¼Œä¼šä¸€ç›´è§¦å‘ EPOLLOUT äº‹ä»¶ï¼›è€Œå¯¹äºè¾¹ç¼˜æ¨¡å¼ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œé™¤é TCP çª—å£ç”±ä¸é¥±å’Œå˜æˆé¥±å’Œå†ä¸€æ¬¡å˜æˆä¸é¥±å’Œï¼Œæ‰ä¼šå†æ¬¡è§¦å‘ EPOLLOUTäº‹ä»¶ã€‚æ ¹æ®ä»¥ä¸Šåˆ†ææ¥çœ‹ï¼Œå¦‚æœé‡‡ç”¨ETæ¨¡å¼å°±å¿…é¡»åœ¨æ”¶åˆ°äº‹ä»¶åä¸€æ¬¡æ€§å°†æ•°æ®è¯»å–å®Œï¼Œä½†å¦‚æœé‡‡ç”¨é»˜è®¤æ¨¡å¼ï¼Œå°±å¯ä»¥æ ¹æ®ä¸šåŠ¡æ¯æ¬¡æ”¶å–å›ºå®šçš„å­—èŠ‚æ•°ï¼Œå¤šæ¬¡æ”¶å–ï¼Œæ˜¾ç„¶ç›¸å¯¹äºé»˜è®¤çš„LTæ¨¡å¼ï¼ŒETæ¨¡å¼èƒ½å¤Ÿå‡å°‘åŒä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘çš„æ¬¡æ•°ï¼Œæ•ˆç‡æ¯”LTæ¨¡å¼é«˜ã€‚\n3.1. é—®é¢˜ å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ETæ¨¡å¼ç›‘å¬ä¸€ä¸ªSocketä¸Šçš„è¯»äº‹ä»¶ï¼Œå½“æ•°æ®åˆ°è¾¾æ—¶è§¦å‘EPOLLINäº‹ä»¶ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹(æˆ–è¿›ç¨‹)ä¸­è¯»å–è¯¥Socketä¸Šçš„æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰è¯»å–å®Œï¼Œè¯¥Socketåˆæœ‰æ–°æ•°æ®åˆ°è¾¾ï¼Œæ­¤æ—¶å¦ä¸€ä¸ªçº¿ç¨‹(æˆ–è¿›ç¨‹)è¢«å”¤é†’æ¥è¯»å–è¯¥Socketä¸Šçš„æ•°æ®ï¼Œé‚£ä¹ˆå°±æœ‰ä¸¤ä¸ªçº¿ç¨‹(è¿›ç¨‹)åŒæ—¶æ“ä½œåŒä¸€ä¸ªSocketï¼Œè¿™æ ·å¥½å—ï¼Œè¿™æ ·ä¸å¥½ï¼Œä½†æ˜¯å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ­¤æ—¶å°±è¯¥EPOLLONESHOTå‡ºåœºäº†ã€‚\n4. EPOLLONESHOTäº‹ä»¶ æ˜¾ç„¶ï¼Œä¸€æ¬¡æ€§äº‹ä»¶ï¼Œå°±æ˜¯è§¦å‘ä»¥åï¼Œéœ€è¦æ‰‹åŠ¨é‡æ–°æ³¨å†Œï¼Œç»™æ–‡ä»¶æè¿°ç¬¦æ³¨å†ŒEPOLLONESHOTäº‹ä»¶ï¼Œå°±å¯ä»¥ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªäººåœ¨ä½¿ç”¨ã€‚\n1 2 3 4 5 6 7 8 // é‡æ–°æ³¨å†ŒEPOLLONESHOTäº‹ä»¶ void reset_oneshot(int epollfd, int fd) { epoll_event event; event.data.fd = fd; event.events = EPOLLIN | EPOLLET | EPOLLONESHOT; epoll_ctl(epollfd, EPOLL_CTL_MOD, fd, \u0026amp;event); } æ³¨æ„ï¼š listening socketæ˜¯ä¸èƒ½ä½¿ç”¨EPOLLONESHOTçš„ï¼Œå¦åˆ™åç»­çš„å®¢æˆ·æ®µè¿æ¥è¯·æ±‚å°±ä¸ä¼šå†è§¦å‘listening socketçš„EPOLLINäº‹ä»¶äº†ã€‚\n5. å…¶ä»–å°ä»£ç  1. å°†æ–‡ä»¶æè¿°ç¬¦è®¾ç½®ä¸ºéé˜»å¡\n1 2 3 4 5 6 7 int setnonblocking(int fd) { int old_option = fcntl(fd, F_GETFL); int new_option = old_option | O_NONBLOCK; fcntl(fd, F_SETFL, new_option); return old_option; } 2. äº‹ä»¶æ³¨å†Œ\n1 2 3 4 5 6 7 8 9 10 11 12 void addfd(int epollfd, int fd, bool enable_et) { epoll_event event; event.data.fd = fd; event.events = EPOLLIN; if(enable_et) { event.events |= EPOLLET; //å¯ç”¨ETæ¨¡å¼ } epoll_ctl(epollfd, EPOLL_CTL_ADD, fd, \u0026amp;event); setnonblocking(fd); } 3. åˆ¤æ–­æ•°æ®æ˜¯å¦è¯»å–å®Œäº†\n1 2 3 4 5 // éé˜»å¡æ¨¡å¼ if ((errno == EAGAIN) || (errno == EWOULDBLOCK)) { // æ•°æ®è¯»å–å®Œäº† } ","date":"2025-05-12T20:16:48+08:00","permalink":"https://zuoco.github.io/p/epoll%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E7%94%A8%E6%B3%95/","title":"EPOLLç³»ç»Ÿè°ƒç”¨ç”¨æ³•"},{"content":"1. BootLoader Bootloaderæ˜¯æ“ä½œç³»ç»Ÿçš„â€œå¼•å¯¼ç¨‹åºâ€ä»¥åŠâ€œå¼•å¯¼ç®¡ç†ç¨‹åºâ€ï¼Œæ“ä½œç³»ç»Ÿçš„å¯åŠ¨æµç¨‹å¯ä»¥ç®€å•ç†è§£ä¸ºï¼š\n[ä¸Šç”µ] \u0026ndash;\u0026gt; [UEFI] \u0026ndash;\u0026gt; [bootloader] \u0026ndash;\u0026gt; [å†…æ ¸] ã€‚\næ˜¾ç„¶ï¼ŒBootloaderçš„ä½œç”¨å°±æ˜¯å°†å†…æ ¸åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åç”±äºå†…æ ¸æ¥åŠ è½½æ“ä½œç³»ç»Ÿçš„å…¶ä»–ç»„ä»¶/æœåŠ¡ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿï¼Œæ–‡ä»¶ç®¡ç†å™¨ï¼Œå›¾å½¢ç•Œé¢ç­‰ã€‚åœ¨linuxç”Ÿæ€ä¸­ï¼Œå¸¸è§çš„Bootloaderæœ‰ä¸¤ç§ï¼ŒGrub(ç”¨äºX86æ¶æ„)ï¼ŒU-Boot(ç”¨äºARMæ¶æ„)ã€‚å…¶ä¸­å¼•å¯¼å°±æ˜¯è¿›è¡Œä¸€äº›ç¡¬ä»¶çš„æ£€æµ‹ã€åˆå§‹åŒ–çš„ä»»åŠ¡ï¼Œç„¶åå°†å†…æ ¸åŠ è½½åˆ°å†…å­˜ä¸­æ¥å¯åŠ¨å†…æ ¸ï¼Œå¼•å¯¼ç®¡ç†å°±æ˜¯å½“æœ‰å¤šä¸ªå†…æ ¸æ—¶ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸€ä¸ªèœå•è®©ç”¨æˆ·é€‰æ‹©è¦å¯åŠ¨çš„å“ªä¸ªå†…æ ¸ã€‚ 2. Grub grubç¨‹åºä¿å­˜åœ¨é‚£é‡Œï¼Ÿ\ngrubç¨‹åºä¿å­˜åœ¨EFIåˆ†åŒºä¸­ï¼ŒEFIåˆ†åŒºæŒ‚åœ¨äºä½äº/boot/efiç›®å½•ä¸‹ã€‚\ngrubé…ç½®æ–‡ä»¶ä¿å­˜åœ¨é‚£é‡Œï¼Ÿ\n/boot/grub/grub.cfgæ–‡ä»¶ï¼Œå®šä¹‰äº†grubæ˜¯å¦‚ä½•å¼•å¯¼å†…æ ¸çš„ã€‚ /etc/default/grubæ–‡ä»¶ï¼Œå®šä¹‰grubå…¨å±€è¡Œä¸ºå’Œå¯åŠ¨å‚æ•°ï¼Œç„¶åç”Ÿæˆ/boot/grub/grub.cfgæ–‡ä»¶ï¼Œä¸‹é¢è®²è§£ä»¥ä¸‹è¯¥é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼š 1 2 3 4 5 6 7 8 9 GRUB_TIMEOUT=5 # å¯åŠ¨èœå•çš„è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶åå¯åŠ¨é»˜è®¤å†…æ ¸,-1è¡¨ç¤ºæ— é™ç­‰å¾…ã€‚ GRUB_TIMEOUT_STYLE=menu # å¯åŠ¨èœå•çš„æ ·å¼ï¼Œmenuè¡¨ç¤ºèœå•æ ·å¼ï¼Œhiddenè¡¨ç¤ºéšè—èœå•ã€‚ GRUB_DISTRIBUTOR=\u0026#34;$(sed \u0026#39;s, release .*$,,g\u0026#39; /etc/system-release)\u0026#34; # åŠ¨æ€æå–å‘è¡Œç‰ˆåç§° GRUB_DEFAULT=saved # é»˜è®¤å¯åŠ¨é¡¹ç”±ä¸Šä¸€æ¬¡ä¿å­˜çš„é€‰æ‹©å†³å®š GRUB_DISABLE_SUBMENU=true # ç¦ç”¨å­èœå•ï¼Œæ‰€æœ‰å†…æ ¸å’Œå¯åŠ¨é¡¹ç›´æ¥æ˜¾ç¤ºåœ¨ä¸»èœå•ä¸­ã€‚è‹¥è®¾ä¸º falseï¼Œæ—§å†…æ ¸ä¼šæŠ˜å åˆ°â€œAdvanced optionsâ€å­èœå•ä¸‹ã€‚ GRUB_TERMINAL_OUTPUT=\u0026#34;console\u0026#34; # å¼ºåˆ¶GRUBä»…ä½¿ç”¨æ–‡æœ¬æ§åˆ¶å°è¾“å‡ºï¼Œç¦ç”¨å›¾å½¢åŒ–ç»ˆç«¯ï¼ˆå¦‚gfxtermï¼‰ã€‚ GRUB_CMDLINE_LINUX=\u0026#34;rhgb quiet\u0026#34; # rhgbï¼šå¯ç”¨Plymouthå›¾å½¢å¯åŠ¨åŠ¨ç”»ï¼ˆå¸¸è§äºRHEL/CentOS/Fedoraï¼‰ã€‚quietï¼šéšè—å†…æ ¸å¯åŠ¨æ—¥å¿—ï¼Œä»…æ˜¾ç¤ºç®€è¦ä¿¡æ¯ã€‚ GRUB_DISABLE_RECOVERY=\u0026#34;true\u0026#34; # ç¦æ­¢æ¢å¤æ¨¡å¼ï¼ˆRecovery Modeï¼‰çš„å¯åŠ¨é¡¹ã€‚ GRUB_ENABLE_BLSCFG=true # å¯ç”¨ Boot Loader Specification (BLS) é…ç½®ï¼Œå–ä»£ä¼ ç»Ÿçš„grub.cfgç”Ÿæˆæ–¹å¼ã€‚ 3. U-Boot XIPè®¾å¤‡\néXIPè®¾å¤‡ä¸­å­˜å‚¨çš„ä»£ç éœ€è¦ä»å­˜å‚¨è®¾å¤‡ä¸­åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åæ‰èƒ½æ‰§è¡Œï¼Œè€ŒXIPå­˜å‚¨è®¾å¤‡ä¸­çš„ä»£ç å¯ä»¥ç›´æ¥æ‰§è¡Œï¼ŒXIPè®¾å¤‡æœ‰SRAMã€BROMç­‰ç­‰ï¼ŒéXIPè®¾å¤‡æœ‰EMMCã€NANDFLASHã€SDå¡ç­‰ç­‰ã€‚ ARM-Linuxå¯åŠ¨æµç¨‹\nU-Bootä¸€èˆ¬åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œuboot-SPLå’Œuboo-properï¼ŒCPUä¸Šç”µé¦–å…ˆæ‰§è¡ŒBROMä¸­çš„ç¨‹åº(ç”±èŠ¯ç‰‡å‚å†™å…¥)ï¼Œè¯¥ç¨‹åºä¼šæ ¹æ®èŠ¯ç‰‡çš„å¼•è„šç”µå¹³æˆ–è€…å¯„å­˜å™¨é…ç½®ç¡®å®šå¯åŠ¨æ¨¡å¼(ä»é‚£ä¸ªè®¾å¤‡å¯åŠ¨ç³»ç»Ÿ)ï¼Œä¾‹å¦‚ç³»ç»Ÿå®‰è£…åœ¨SDå¡ï¼ŒBROMä¸­çš„ç¨‹åºä¼šåˆå§‹åŒ–SDå¡ï¼Œç„¶åæ‹·è´uboot-splåˆ°SRAMä¸­ï¼Œå¼€å§‹æ‰§è¡Œuboot-splä¸­çš„ç¨‹åºï¼Œuboot-splç¨‹åºä¼šåˆå§‹åŒ–LDDRå†…å­˜ã€pllã€gpioç­‰ç­‰ç¡¬ä»¶ï¼Œç„¶åä»SDå¡ä¸­åŠ è½½uboot-properåˆ°LDDRä¸­ï¼Œå¹¶è·³è½¬åˆ°ç¨‹åºçš„å…¥å£åœ°å€æ‰§è¡Œuboot-properç¨‹åºã€‚ubootè¿˜ä¼šåˆå§‹åŒ–ä¸€äº›å…¶ä»–è®¾å¤‡ï¼Œä¾‹å¦‚ç½‘å¡ç­‰ï¼Œç„¶åä»SDå¡ä¸­åŠ è½½å†…æ ¸æ–‡ä»¶ã€‚\nå‚è€ƒ:\nhttps://linux-sunxi.org/Bootable_SD_card#SD_Card_Layout 4. ä¿®æ”¹Grubé…ç½® GRUBé…ç½®æ–‡ä»¶ï¼š /boot/grub2/grub.cfgï¼Œä½†æ˜¯è¯¥é…ç½®æ–‡ä»¶æ˜¯ç”Ÿæˆçš„ï¼Œä¸å¯ç›´æ¥æ‰‹åŠ¨ä¿®æ”¹ï¼Œæˆ‘ä»¬é€šè¿‡ä¿®æ”¹/etc/default/grubæ–‡ä»¶å’Œ/etc/grub.d/ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ç”Ÿæˆçš„ã€‚\n4.1. Fedoraç³»ç»Ÿ ä¿®æ”¹/etc/default/grubæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œsudo grub2-mkconfig -o /boot/grub2/grub.cfgå‘½ä»¤æ¥ç”Ÿæˆæ–°çš„/boot/grub2/grub.cfgæ–‡ä»¶ã€‚\n4.2. Debianç³»ç»Ÿ ä¿®æ”¹/etc/default/grubæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œsudo update-grubå‘½ä»¤æ¥ç”Ÿæˆæ–°çš„/boot/grub/grub.cfgæ–‡ä»¶ã€‚\n5. æŸ¥çœ‹Grubé…ç½®ä¿¡æ¯ 5.1. Fedoraç³»ç»Ÿ 5.1.1. grubbyå‘½ä»¤ æŸ¥çœ‹é»˜è®¤å¼•å¯¼é¡¹ 1 sudo grubby --info=DEFAULT åˆ—å‡ºæ‰€æœ‰å¼•å¯¼é¡¹ 1 sudo grubby --info=ALL åˆ—å‡ºæ‰€æœ‰å¼•å¯¼é¡¹çš„ç´¢å¼• 1 sudo grubby --info=0 # 0æ˜¯å¼•å¯¼é¡¹çš„ç´¢å¼•ï¼Œä½¿ç”¨sudo grubby --info=ALLå‘½ä»¤æŸ¥çœ‹ 5.2. Debianç³»ç»Ÿ ä½¿ç”¨grepå‘½ä»¤æŸ¥çœ‹å³å¯ã€‚\n","date":"2025-05-10T20:46:50+08:00","permalink":"https://zuoco.github.io/p/bootloader/","title":"BootLoader"},{"content":"1. å†…æ ¸ä¸­çš„Makefileã€Kconfigã€config Makefileï¼šç¼–è¯‘æºæ–‡ä»¶çš„æ–¹æ³•ã€‚ Kconfigï¼šå†…æ ¸çš„é…ç½®èœå•ã€‚ .configï¼šæ ¹æ®é…ç½®èœå•ç”Ÿæˆçš„é…ç½®ï¼Œæ ¹æ®è¯¥é…ç½®ç¼–è¯‘å†…æ ¸ã€‚ 2. Makefile å†…æ ¸ä¸­çš„Makefileä¸­æœ‰ä¸‰ç§ç¼–è¯‘è§„åˆ™ï¼š\nç¼–è¯‘è¿›å…¥å†…æ ¸ã€‚ 1 obj-y += xxx/ # è¿›å…¥å­Makefile 1 obj-y += xxx.o æ ¹æ®.configå†³å®šæ˜¯å¦ç¼–è¯‘è¿›å…¥å†…æ ¸ã€‚ 1 obj-$(CONFIG_XXX) += xxx/ # è¿›å…¥å­Makefile 1 obj-$(CONFIG_XXX) += xxx.o ç¼–è¯‘ä¸ºæ¨¡å— æ‰§è¡Œmake modulesæ—¶è¢«ç¼–è¯‘ 1 obj-m += xxx.o 3. Kconfig æ‰§è¡Œmake menuconfigæ—¶ä¼šå±•ç¤ºä¸€ä¸ªèœå•ï¼Œå°±æ˜¯Kconfigçš„åŠŸåŠ³ã€‚\nlinux-6.0ç›®å½•ä¸‹çš„Kconfig: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # SPDX-License-Identifier: GPL-2.0 # # For a description of the syntax of this configuration file, # see Documentation/kbuild/kconfig-language.rst. # mainmenu \u0026#34;Linux/$(ARCH) $(KERNELVERSION) Kernel Configuration\u0026#34; source \u0026#34;scripts/Kconfig.include\u0026#34; # ...... è¡¨ç¤ºçœç•¥ä¸€å †ä»£ç  # ...... source \u0026#34;drivers/Kconfig\u0026#34; # ...... # ...... source \u0026#34;Documentation/Kconfig\u0026#34; linux-6.0/driversç›®å½•ä¸‹çš„Kconfig: 1 2 3 4 5 6 7 8 9 10 11 # SPDX-License-Identifier: GPL-2.0 menu \u0026#34;Device Drivers\u0026#34; # Keep I/O buses first # ...... # ...... source \u0026#34;drivers/video/Kconfig\u0026#34; ## ...... ## ...... linux-6.0/drivers/videoç›®å½•ä¸‹çš„Kconfig: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # SPDX-License-Identifier: GPL-2.0-only # # Video configuration # menu \u0026#34;Graphics support\u0026#34; # ...... # ...... source \u0026#34;drivers/gpu/drm/Kconfig\u0026#34; # ...... # ...... endmenu linux-6.0/drivers/gpu/drmç›®å½•ä¸‹çš„Kconfig: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # ...... # ...... source \u0026#34;drivers/gpu/drm/display/Kconfig\u0026#34; # ...... #...... source \u0026#34;drivers/gpu/drm/amd/amdgpu/Kconfig\u0026#34; source \u0026#34;drivers/gpu/drm/nouveau/Kconfig\u0026#34; source \u0026#34;drivers/gpu/drm/i915/Kconfig\u0026#34; source \u0026#34;drivers/gpu/drm/rockchip/Kconfig\u0026#34; source \u0026#34;drivers/gpu/drm/qxl/Kconfig\u0026#34; source \u0026#34;drivers/gpu/drm/virtio/Kconfig\u0026#34; source \u0026#34;drivers/gpu/drm/xen/Kconfig\u0026#34; source \u0026#34;drivers/gpu/drm/vboxvideo/Kconfig\u0026#34; drivers/gpu/drm/qxl/Kconfig: 1 2 3 4 5 6 7 8 9 10 11 12 # SPDX-License-Identifier: GPL-2.0-only config DRM_QXL tristate \u0026#34;QXL virtual GPU\u0026#34; depends on DRM \u0026amp;\u0026amp; PCI \u0026amp;\u0026amp; MMU select DRM_KMS_HELPER select DRM_TTM select DRM_TTM_HELPER select CRC32 help QXL virtual GPU for Spice virtualization desktop integration. Do not enable this driver unless your distro ships a corresponding X.org QXL driver that can handle kernel modesetting. ä¸‹é¢è¯¦ç»†åˆ†æä¸€ä¸‹è¿™ä¸ªKconfigæ–‡ä»¶çš„å†…ã€‚\n3.1. Kconfigæ–‡ä»¶å†…å®¹åˆ†æ ç¬¬1è¡Œ\n1 # SPDX-License-Identifier: GPL-2.0-only å£°æ˜æ­¤æ–‡ä»¶çš„è®¸å¯è¯ä¸º GPL-2.0-onlyï¼ˆGNUé€šç”¨å…¬å…±è®¸å¯è¯ç¬¬2ç‰ˆï¼Œä»…é™æ­¤ç‰ˆæœ¬ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªå¼€æºè®¸å¯è¯ï¼Œè¡¨ç¤ºä»»ä½•äººå¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æ­¤ä»£ç ï¼Œä½†å¿…é¡»ä¿ç•™ç›¸åŒçš„è®¸å¯è¯æ¡æ¬¾ã€‚only è¡¨ç¤ºåªèƒ½ä½¿ç”¨ GPL-2.0ï¼Œä¸èƒ½å‡çº§åˆ°æ›´æ–°çš„ç‰ˆæœ¬ï¼ˆå¦‚ GPL-3.0ï¼‰ã€‚ ç¬¬2è¡Œ\n1 config DRM_QXL # ä½¿ç”¨configå…³é”®å­—å®šä¹‰ä¸€ä¸ªé€‰é¡¹ å®šä¹‰äº†ä¸€ä¸ªé€‰é¡¹ï¼Œçœç•¥äº†CONFIG_ï¼Œå…¨ç§°æ˜¯CONFIG_DRM_QXLï¼Œåœ¨å¯¹åº”çš„Makefileæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚å¦‚ä¸‹ï¼š\ndrivers/gpu/drm/Makefile\n1 obj-$(CONFIG_DRM_QXL) += qxl/ drivers/gpu/drm/qxl/Makefile\n1 obj-$(CONFIG_DRM_QXL)+= qxl.o ç¬¬3è¡Œ\n1 tristate \u0026#34;QXL virtual GPU\u0026#34; å£°æ˜ DRM_QXL æ˜¯ä¸€ä¸ª ä¸‰æ€é€‰é¡¹ï¼ˆtristateï¼‰ï¼Œå¯é€‰å€¼ä¸º Yï¼ˆå†…ç½®ï¼‰ã€Mï¼ˆæ¨¡å—ï¼‰ã€Nï¼ˆç¦ç”¨ï¼‰ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æè¿°æ–‡æœ¬ \u0026ldquo;QXL virtual GPU\u0026rdquo;ã€‚ Yï¼ˆYesï¼‰ï¼šé©±åŠ¨ç›´æ¥ç¼–è¯‘è¿›å†…æ ¸ã€‚\nMï¼ˆModuleï¼‰ï¼šé©±åŠ¨ç¼–è¯‘ä¸ºå¯åŠ è½½çš„å†…æ ¸æ¨¡å—ï¼ˆ.ko æ–‡ä»¶ï¼‰ã€‚\nNï¼ˆNoï¼‰ï¼šä¸ç¼–è¯‘æ­¤é©±åŠ¨ã€‚\nç¬¬4è¡Œ\n1 depends on DRM \u0026amp;\u0026amp; PCI \u0026amp;\u0026amp; MMU æŒ‡å®š DRM_QXL çš„ä¾èµ–æ¡ä»¶ï¼Œåªæœ‰å½“ DRMã€PCI å’Œ MMU éƒ½è¢«å¯ç”¨æ—¶ï¼ŒDRM_QXL æ‰èƒ½è¢«é€‰æ‹©ã€‚\nç¬¬5~8è¡Œ\n1 2 3 4 select DRM_KMS_HELPER select DRM_TTM select DRM_TTM_HELPER select CRC32 åå‘ä¾èµ–å…³ç³»ï¼Œè¯¥é€‰é¡¹é€‰ä¸­æ—¶ï¼ŒåŒæ—¶é€‰ä¸­selectåé¢å®šä¹‰çš„é‚£ä¸€é¡¹ã€‚ã€‚\nç¬¬9~13è¡Œ\n1 2 3 4 help QXL virtual GPU for Spice virtualization desktop integration. Do not enable this driver unless your distro ships a corresponding X.org QXL driver that can handle kernel modesetting. ä¸º DRM_QXL æä¾›å¸®åŠ©ä¿¡æ¯ï¼Œåœ¨é…ç½®å·¥å…·ä¸­æŒ‰ ? å¯ä»¥æŸ¥çœ‹ã€‚\n4. .configæ–‡ä»¶ ä½¿ç”¨make menuconfigç”Ÿæˆçš„é…ç½®æ–‡ä»¶ã€‚\n5. make menuconfig è¿è¡Œmake menuconfigå‘½ä»¤ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªé…ç½®èœå•:\nä½¿ç”¨â€œä¸Šâ€â€œä¸‹â€æ–¹å‘é”®é€‰æ‹©é€‰é¡¹ï¼Œä½¿ç”¨â€œç©ºæ ¼â€é”®é€‰æ‹©æˆ–å–æ¶ˆé€‰æ‹©é€‰é¡¹ï¼Œä½¿ç”¨â€œEnterâ€é”®è¿›å…¥å­èœå•ã€‚ä½¿ç”¨â€œå·¦â€â€œå³â€ä¿å­˜ã€åé€€ã€åŠ è½½å·²æœ‰çš„.configæ–‡ä»¶ã€‚é…ç½®å®Œåä¿å­˜ä¸º.configæ–‡ä»¶ï¼Œç„¶åè¿è¡Œmakeå‘½ä»¤è¿›è¡Œå¼€å§‹ç¼–è¯‘ã€‚\n","date":"2025-05-10T18:06:49+08:00","image":"https://zuoco.github.io/p/linux%E5%86%85%E6%A0%B8%E6%9E%84%E5%BB%BA%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E6%9E%84%E5%BB%BA/AAA_hu_d486ea4199ce7f81.jpg","permalink":"https://zuoco.github.io/p/linux%E5%86%85%E6%A0%B8%E6%9E%84%E5%BB%BA%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E6%9E%84%E5%BB%BA/","title":"Linuxå†…æ ¸æ„å»ºã€å†…æ ¸æ¨¡å—æ„å»º"},{"content":"iBMCæœåŠ¡å™¨ç®¡ç†è½¯ä»¶ iBMCæ™ºèƒ½ç®¡ç†ç³»ç»Ÿï¼ˆIntelligent Baseboard Management Controllerï¼Œä»¥ä¸‹ç®€ç§°iBMCï¼‰æ˜¯é¢å‘æœåŠ¡å™¨å…¨ç”Ÿå‘½å‘¨æœŸçš„æœåŠ¡å™¨åµŒå…¥å¼ç®¡ç†ç³»ç»Ÿã€‚æä¾›ç¡¬ä»¶çŠ¶æ€ç›‘æ§ã€éƒ¨ç½²ã€èŠ‚èƒ½ã€å®‰å…¨ç­‰ç³»åˆ—ç®¡ç†å·¥å…·ï¼Œæ ‡å‡†åŒ–æ¥å£æ„å»ºæœåŠ¡å™¨ç®¡ç†æ›´åŠ å®Œå–„çš„ç”Ÿæ€ç³»ç»Ÿã€‚\niBMCç™»é™†ç•Œé¢ iBMCç®¡ç†ç•Œé¢ ç›‘æ§ä¸æ•…éšœç®¡ç† (FDM) æ•…éšœè¯Šæ–­ä¸ç®¡ç†ï¼ˆFDMï¼‰æ˜¯iBMCä¸€ç³»åˆ—è¯Šæ–­æŠ€æœ¯å’Œå·¥å…·çš„æ€»ç§°ï¼ŒFDMå¯¹æœåŠ¡å™¨å„ç±»éƒ¨ä»¶è¿›è¡Œå…¨é¢çš„ç›‘æ§ï¼Œå®ç°æœåŠ¡å™¨å…³é”®éƒ¨ä»¶çš„æ·±åº¦æ•…éšœè¯Šæ–­å’Œæ•…éšœé¢„æµ‹æœºåˆ¶ã€‚\næ™ºæ…§èƒ½è€—ç®¡ç† (DEMT) åŠ¨æ€èƒ½è€—ç®¡ç†æŠ€æœ¯ï¼ˆDEMTï¼‰æ˜¯ä¸€ç»„æ ¹æ®CPUè´Ÿè½½ã€ç¯å¢ƒæ¸©åº¦ç­‰å¤šç§è¾“å…¥å‚æ•°ï¼ŒåŠ¨æ€å®æ—¶æ™ºèƒ½è°ƒèŠ‚å„éƒ¨ä»¶çš„åŠŸè€—çš„æŠ€æœ¯é›†åˆï¼Œé€šè¿‡åŠ¨æ€èƒ½è€—ç®¡ç†æŠ€æœ¯å’Œä¼‘çœ æŠ€æœ¯ï¼Œä½¿è®¾å¤‡èŠ‚èƒ½ç®¡ç†æ›´åŠ é«˜æ•ˆã€‚\nâ€œé›¶â€æ¥è§¦è¿ç»´ iBMCæä¾›KVMï¼ŒSOLè™šæ‹Ÿåª’ä½“ï¼ŒWebæ¥å…¥ç­‰å¤šç§è¿œç¨‹ç®¡ç†æ–¹å¼ï¼Œæ”¯æŒé…ç½®ã€å‡çº§ã€éƒ¨ç½²èƒ½åŠ›ï¼Œå®ç°â€œé›¶â€æ¥è§¦è¿ç»´ï¼Œæ–¹ä¾¿è¿ç»´äººå‘˜éšæ—¶éšåœ°æ¥å…¥æœåŠ¡å™¨å®æ–½è¿ç»´ç®¡ç†ã€‚\n","date":"2025-05-08T21:01:19+08:00","image":"https://zuoco.github.io/p/ibmc%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6/AAA_hu_b61cde5c6187d9b1.jpg","permalink":"https://zuoco.github.io/p/ibmc%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6/","title":"iBMCæœåŠ¡å™¨ç®¡ç†è½¯ä»¶"},{"content":"1. åŸºæœ¬æ¦‚å¿µ ä»“åº“ï¼ˆRepositoryï¼‰ï¼šä¸€ä¸ªGitä»“åº“æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶å’Œå†å²è®°å½•çš„ç›®å½•ã€‚\næœ¬åœ°ä»“åº“ï¼ˆLocal Repositoryï¼‰ï¼šåœ¨ä½ çš„æœ¬åœ°è®¡ç®—æœºä¸Šçš„ä»“åº“ã€‚ è¿œç¨‹ä»“åº“ï¼ˆRemote Repositoryï¼‰ï¼šæ‰˜ç®¡åœ¨æœåŠ¡å™¨ä¸Šçš„ä»“åº“ï¼Œé€šå¸¸æ˜¯GitHubã€GitLabç­‰ã€‚ å·¥ä½œåŒºï¼ˆWorkspaceï¼‰: ä½ åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šçš„é¡¹ç›®ç›®å½•ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•ã€‚ æš‚å­˜åŒºï¼ˆStageï¼‰: ç”¨äºæš‚å­˜å³å°†æäº¤çš„æ–‡ä»¶ï¼Œæ·»åŠ åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ä¼šè¢«gitè·Ÿè¸ªã€‚ ä¸»åˆ†æ”¯ï¼šæ–°å»ºä¸€ä¸ªä»“åº“ä¼šåˆ†é…ä¸€ä¸ªé»˜è®¤ä¸»åˆ†æ”¯ï¼Œæ—©æœŸä¸ºâ€œmasterâ€ï¼Œç°åœ¨ä¸ºâ€œmainâ€ã€‚ head: æŒ‡å‘å½“å‰å·¥ä½œçš„åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼Œæ¯æ¬¡æäº¤éƒ½ä¼šæ›´æ–°headï¼Œä¿æŒheadæŒ‡å‘æœ€æ–°çš„æäº¤ã€‚\n2. Gitçš„é…ç½® å…¨å±€é…ç½®ï¼š\n1 2 3 4 5 6 7 git config --global user.name \u0026#34;Your Name\u0026#34; git config --global user.email \u0026#34;your_email@example.com\u0026#34; ä»“åº“é…ç½®ï¼š ```bash # åœ¨ä»“åº“ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š git config --local user.name \u0026#34;Your Name\u0026#34; git config --local user.email \u0026#34;your_email@example.com\u0026#34; ä¿å­˜åœ¨å½“å‰ä»“åº“ä¸‹.git/configæ–‡ä»¶ä¸­ï¼Œä»“åº“é…ç½®ä¼šè¦†ç›–å…¨å±€é…ç½®ã€‚\næŸ¥çœ‹é…ç½®ï¼š\n1 git config --list 3. åˆ›å»ºæœ¬åœ°ä»“åº“ 1 git init 4. æŸ¥çœ‹ä»“åº“çŠ¶æ€ 1 git status 5. æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº 1 2 git add \u0026lt;file\u0026gt; git add . # æ·»åŠ æ‰€æœ‰æ–‡ä»¶ 6. æäº¤åˆ°æœ¬åœ°ä»“åº“ 1 git commit -m \u0026#34;æäº¤ä¿¡æ¯\u0026#34; gitä¼šä¸ºæ¯ä¸€ä¸ªæäº¤åˆ›å»ºä¸€æ¡ç‰ˆæœ¬å†å²è®°å½•ï¼ŒåŒ…å«ï¼š\ncommit id: 40ä½å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºä¸€ä¸ªå”¯ä¸€çš„æäº¤IDï¼Œç”¨äºæ ‡è¯†æäº¤ï¼Œåœ¨å‘½ä»¤ä¸­ä½¿ç”¨å‰6ä½å³å¯ã€‚ commit message: æäº¤ä¿¡æ¯ï¼Œç”¨äºæè¿°æœ¬æ¬¡æäº¤çš„å†…å®¹ã€‚ å¿«ç…§ï¼š å®Œæ•´ç‰ˆæœ¬æ–‡ä»¶ï¼Œä»¥å¯¹è±¡æ ‘çš„å½¢å¼å­˜å‚¨åœ¨.git/objectsç›®å½•ä¸‹ã€‚ commitè¿˜æœ‰å…¶ä»–ç”¨æ³•ï¼š\n1 2 # ä½¿ç”¨ä¸€æ¬¡æ–°çš„æäº¤ï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤ï¼Œä¼šä¿®æ”¹commit id git commit --amend -m \u0026#34;ä¿®æ”¹æäº¤ä¿¡æ¯\u0026#34; 1 2 # æäº¤æŒ‡å®šæ–‡ä»¶ git commit filename 7. æäº¤æ—¥å¿— 1 git log ä¼šåˆ—å‡ºæ‰€æœ‰æäº¤çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬commit idã€commit messageã€ä½œè€…ã€æäº¤æ—¶é—´ç­‰ã€‚\n8. æŸ¥è¯¢æ–‡ä»¶å˜æ›´ 1 git diff å¯ä»¥æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¹‹é—´çš„å·®å¼‚ï¼Œåˆ é™¤çš„è¡Œä¼šä»¥åˆ é™¤ç¬¦å·ï¼ˆ\u0026mdash;ï¼‰æ ‡è®°ï¼Œæ–°å¢çš„è¡Œä¼šä»¥æ–°å¢ç¬¦å·ï¼ˆ+++ï¼‰æ ‡è®°ã€‚\nChanges to be committed: å·²ç»git addçš„æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰git commitçš„æ–‡ä»¶ã€‚ Changes not staged for commit: è¿˜æ²¡æœ‰git addçš„æ–‡ä»¶ã€‚ Unmodified files: æ²¡æœ‰è¢«gitè·Ÿè¸ªçš„æ–‡ä»¶ã€‚\n9. å…³è”è¿œç¨‹ä»“åº“ å…³è”è¿œç¨‹ä»“åº“ï¼š æƒ…å†µ1ï¼šå·²åˆ›å»ºæœ¬åœ°ä»“åº“\n1 git remote add origin \u0026lt;repository_url\u0026gt; æƒ…å†µ2ï¼šæœªåˆ›å»ºæœ¬åœ°ä»“åº“\n1 2 3 4 5 6 7 8 9 # å…ˆåˆ›å»ºä»“åº“ git init # å…³è”è¿œç¨‹ä»“åº“ git remote add origin \u0026lt;repository_url\u0026gt; # æäº¤åˆ°æœ¬åœ°ä»“åº“ git add . git commit -m \u0026#34;xxxxxx\u0026#34; # æ¨é€æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“ git push -u origin main 10. å…‹éš†è¿œç¨‹ä»“åº“ 1 git clone \u0026lt;repository_url\u0026gt; 11. æŸ¥çœ‹å…³è”çš„è¿œç¨‹ä»“åº“ 1 git remote -v 12. åŒæ­¥ä»“åº“ 1 2 3 git pull \u0026lt;è¿œç¨‹ä»“åº“å\u0026gt; \u0026lt;è¿œç¨‹ä»“åº“åˆ†æ”¯å\u0026gt; # è·å–è¿œç¨‹ä»“åº“çš„æœ€æ–°æäº¤ï¼Œå¹¶ä¸æœ¬åœ°ä»“åº“åˆå¹¶ã€‚ # git pull origin main # git pull é»˜è®¤ä»å½“å‰ä»“åº“è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯æ‹‰å–æ›´æ–°ã€‚ 13. æ¨é€åˆ°è¿œç¨‹ä»“åº“ 1 2 3 # originå°±æ˜¯ä½¿ç”¨â€œgit remote add origin \u0026lt;ä»“åº“åœ°å€\u0026gt;â€æ‰€æ·»åŠ çš„è¿œç¨‹ä»“åº“ã€‚ git push -u origin main # ç¬¬ä¸€æ¬¡æ¨é€æ—¶ï¼Œéœ€è¦ä½¿ç”¨-uè®¾ç½®ä¸Šæ¸¸åˆ†æ”¯ï¼Œè¡¨ç¤ºå°†å½“æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å…³è”èµ·æ¥ã€‚ git push # æ¨é€åˆ°é»˜è®¤çš„è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯ã€‚ 1 git push origin \u0026lt;æœ¬åœ°åˆ†æ”¯å\u0026gt;:\u0026lt;è¿œç¨‹åˆ†æ”¯å\u0026gt; # æ¨é€æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“çš„æŒ‡å®šåˆ†æ”¯ã€‚ 1 git push --all origin # å°†æœ¬åœ°æ‰€æœ‰åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚ 14. gitåˆ†æ”¯ 14.1. æŸ¥çœ‹åˆ†æ”¯ 1 2 git branch # æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ git branch -a # æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ŒåŒ…æ‹¬æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯ 14.2. åˆ›å»ºåˆ†æ”¯ 1 git branch \u0026lt;branch_name\u0026gt; 14.3. åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ 1 2 git checkout \u0026lt;branch_name\u0026gt; git switch \u0026lt;branch_name\u0026gt; 14.4. åˆ†æ”¯åˆå¹¶ 1 git merge \u0026lt;branch_name\u0026gt; # å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ ä¾‹å¦‚ï¼š\nå½“å‰æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼šmainå’Œdevï¼Œç°åœ¨éœ€è¦å°†devåˆ†æ”¯åˆå¹¶åˆ°mainåˆ†æ”¯ä¸Šï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n1 2 git switch main # åˆ‡æ¢åˆ°mainåˆ†æ”¯ git merge dev # å°†devåˆ†æ”¯åˆå¹¶åˆ°mainåˆ†æ”¯ä¸Š 15. gitå†²çª åˆå¹¶æ—¶å‘ç”Ÿå†²çªï¼š* CONFLICT (content): Merge conflict in XXXXXX Automatic merge failed; fix conflicts and then commit the result.\nå‘ç”Ÿå†²çªæ—¶:\nä½¿ç”¨git statuså‘½ä»¤æŸ¥çœ‹å†²çªæ–‡ä»¶ï¼Œå¹¶æ‰“å¼€å†²çªæ–‡ä»¶: 1 both modified: xxxxxx # ä¸¤ä¸ªåˆ†æ”¯éƒ½ä¿®æ”¹äº†xxxxxxæ–‡ä»¶ æ‰“å¼€xxxxxxæ–‡ä»¶ï¼š 1 2 3 4 5 \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD è¿™é‡Œæ˜¯åŸæœ¬çš„ä»£ç ï¼› ======= è¿™é‡Œæ˜¯devåˆ†æ”¯ä¿®æ”¹çš„ä»£ç ï¼› \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; dev é˜…è¯»ä»£ç é€»è¾‘ï¼Œæ‰‹åŠ¨ä¿®æ”¹ä»£ç ï¼Œå¹¶ä¿å­˜æ–‡ä»¶ï¼Œç„¶åé‡æ–°addä»¥åŠcommitå°±å¯ä»¥äº†ï¼Œä¸éœ€è¦é‡æ–°mergeï¼Œå·²ç»mergeè¿‡äº†ã€‚\n16. åˆ é™¤åˆ†æ”¯ åˆå¹¶åˆ†æ”¯åï¼Œåˆ é™¤åˆ†æ”¯ï¼š\n1 2 3 4 git branch -d \u0026lt;branch_name\u0026gt; # åˆ é™¤æœ¬åœ°åˆ†æ”¯ git push origin --delete \u0026lt;branch_name\u0026gt; # åˆ é™¤è¿œç¨‹åˆ†æ”¯ git branch -D \u0026lt;branch_name\u0026gt; # å¼ºåˆ¶åˆ é™¤åˆ†æ”¯ 17. æ ‡ç­¾ ç”¨æ¥æ ‡æ³¨é¡¹ç›®ä¸­çš„ç‰¹å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚æ­£å¼å‘å¸ƒç‰ˆæœ¬ï¼Œå¦‚v1.0.0ã€‚\n17.1. æŸ¥çœ‹æ ‡ç­¾ 1 git tag # æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ 1 git show \u0026lt;tag_name\u0026gt; # æŸ¥çœ‹æŒ‡å®šæ ‡ç­¾è¯¦ç»†ä¿¡æ¯ 17.2. åˆ›å»ºæ ‡ç­¾ è½»é‡æ ‡ç­¾ï¼š\n1 git tag \u0026lt;tag_name\u0026gt; # æŒ‡å‘å½“å‰æœ€æ–°çš„æäº¤ é™„æ³¨æ ‡ç­¾ï¼š\n1 git tag -a \u0026lt;tag_name\u0026gt; -m \u0026#34;tag_message\u0026#34; # æŒ‡å‘å½“å‰æœ€æ–°çš„æäº¤ ç»™è¿‡å»çš„æäº¤æ‰“æ ‡ç­¾ï¼š\n1 git tag -a \u0026lt;æ ‡ç­¾å\u0026gt; \u0026lt;commit_id\u0026gt; -m \u0026#34;tag_message\u0026#34; # commit_idä½¿ç”¨å‰6ä½å³å¯ 17.3. æ¨é€æ ‡ç­¾ æ¨é€å•ä¸ªæ ‡ç­¾ï¼š\n1 git push origin \u0026lt;tag_name\u0026gt; æ¨é€æ‰€æœ‰æ ‡ç­¾ï¼š\n1 git push origin --tags 17.4. åˆ é™¤æ ‡ç­¾ åˆ é™¤æœ¬åœ°æ ‡ç­¾ï¼š\n1 git tag -d \u0026lt;tag_name\u0026gt; åˆ é™¤æœ¬åœ°æ ‡ç­¾åï¼Œå…ƒè¿œç¨‹æ ‡ç­¾è¿˜åœ¨ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤è¿œç¨‹æ ‡ç­¾ï¼š\n1 git push origin --delete \u0026lt;tag_name\u0026gt; 18. æ’¤é”€ä¿®æ”¹ 18.1. è¿˜æ²¡æœ‰git addï¼Œæƒ³æ¢å¤åˆ°æœ€åä¸€æ¬¡æäº¤ 1 git reset checkout -- xxxxxx.cpp 18.2. å·²ç»git addï¼Œæƒ³æ¢å¤åˆ°æœ€åä¸€æ¬¡æäº¤ 1 2 git reset HEAD xxxxxx.cpp # å°†æ–‡ä»¶ä»æš‚å­˜åŒºç§»é™¤ï¼Œä½†æ–‡ä»¶çš„ä¿®æ”¹ä»ç„¶ä¿å­˜åœ¨æ–‡ä»¶ä¸­ git checkout -- xxxxxx.cpp # å°†æ–‡ä»¶æ¢å¤åˆ°æœ€åä¸€æ¬¡æäº¤çš„çŠ¶æ€ 18.3. å·²ç»git commitï¼Œæƒ³å›é€€åˆ°æŸä¸ªæäº¤ å›é€€æœ¬åœ°æäº¤ï¼š\n1 2 3 git reset --soft HEAD~1 # ä¼šé€€æäº¤åˆ°å½“å‰åˆ†æ”¯çš„ä¸Šä¸€æ¬¡æäº¤ï¼Œä½†æ˜¯ä»£ç ä¾ç„¶ä¿ç•™åœ¨æš‚å­˜åŒºï¼Œä»¥åŠå·¥ä½œåŒºã€‚ # HEAD~1è¡¨ç¤ºå½“å‰æœ€æ–°æäº¤çš„ä¸Šä¸€ä¸ªæäº¤ã€‚ git reset --mixed HEAD~1 # ä¼šé€€æäº¤ï¼Œåˆ é™¤æš‚å­˜åŒºå¯¹åº”ä»£ç ï¼Œä½†å·¥ä½œåŒºä¾ç„¶ä¿ç•™ã€‚ # é»˜è®¤æ¨¡å¼ git reset --hard HEAD~1 # ä¼šé€€æäº¤ï¼Œåˆ é™¤æš‚å­˜åŒºå¯¹åº”ä»£ç ï¼Œåˆ é™¤å·¥ä½œåŒºå¯¹åº”ä»£ç ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨commit idæ›¿ä»£HEAD~1ã€‚\nä¼šé€€è¿œç¨‹æäº¤ï¼š åˆ›å»ºä¸€æ¬¡æ–°çš„commitï¼Œè¦†ç›–æŒ‡å®šçš„ä¸€æ¬¡commitã€‚\n1 2 3 git revert commit_id git commit -m \u0026#34;Revert commit_id\u0026#34; # å†æ¬¡æäº¤ git push origin master 19. æäº¤çš„åˆå¹¶ Cherry-pick å°†æŸä¸ªåˆ†æ”¯ä¸Šçš„å•ä¸ªæˆ–å¤šä¸ªæäº¤ï¼ˆcommitï¼‰â€œå¤åˆ¶â€åˆ°å½“å‰åˆ†æ”¯,åˆå¹¶æäº¤ï¼Œè€Œä¸æ˜¯åˆå¹¶æ•´ä¸ªåˆ†æ”¯ã€‚\n1 2 3 4 5 # åˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯ git checkout \u0026lt;ç›®æ ‡åˆ†æ”¯å\u0026gt; # åº”ç”¨æŒ‡å®šæäº¤ï¼ˆ\u0026lt;commit-hash\u0026gt; æ˜¯æºåˆ†æ”¯æäº¤çš„å“ˆå¸Œå€¼ï¼‰ git cherry-pick \u0026lt;commit-hash\u0026gt; 1 2 3 4 5 # ä¾æ¬¡åº”ç”¨å¤šä¸ªæäº¤ git cherry-pick \u0026lt;commit1\u0026gt; \u0026lt;commit2\u0026gt; \u0026lt;commit3\u0026gt; # æˆ–ä½¿ç”¨åŒºé—´è¯­æ³•ï¼ˆå·¦å¼€å³é—­ï¼‰ git cherry-pick \u0026lt;start-commit\u0026gt;^..\u0026lt;end-commit\u0026gt; ","date":"2025-05-07T21:48:29+08:00","image":"https://zuoco.github.io/p/git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/git_hu_5f7d6e0c84ead86c.jpg","permalink":"https://zuoco.github.io/p/git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","title":"GitåŸºæœ¬ä½¿ç”¨"},{"content":"1. é¡¹ç›®æ„å»ºç³»ç»Ÿ 2. é¡¹ç›®ç›®å½•ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 deskflow-1.21.2/ â”œâ”€â”€ cmake/ â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ cspell.json â”œâ”€â”€ deploy/ â”œâ”€â”€ doc/ â”œâ”€â”€ src/ â”œâ”€â”€ LICENSE â”œâ”€â”€ LICENSES/ â”œâ”€â”€ README.md â”œâ”€â”€ REUSE.toml â”œâ”€â”€ SECURITY.md â”œâ”€â”€ sonar-project.properties â”œâ”€â”€ vcpkg-configuration.json â””â”€â”€ vcpkg.json ä¸‹é¢å¤§æ¦‚ä»‹ç»ä¸€ä¸‹ä¸»è¦æ–‡ä»¶çš„ç”¨é€”ï¼š\n2.1. vcpkg.jsonå’Œvcpkg-configuration.json vcpkgæ˜¯ä¸€ä¸ªC++åŒ…ç®¡ç†å·¥å…·ï¼Œvcpkg-configuration.json å’Œ vcpkg.json ååŒå·¥ä½œã€‚vcpkg.json åˆ—å‡ºäº†é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…ï¼Œè€Œ vcpkg-configuration.json åˆ™æŒ‡å®šäº†ä»å“ªäº›åœ°æ–¹è·å–è¿™äº›åŒ…ã€‚å½“æ‰§è¡Œ vcpkg install å‘½ä»¤æ—¶ï¼Œvcpkg ä¼šå…ˆä¾æ® vcpkg-configuration.json é…ç½®çš„æ³¨å†Œè¡¨ï¼Œå†æŒ‰ç…§ vcpkg.json åˆ—å‡ºçš„ä¾èµ–ï¼Œå»ä¸‹è½½ã€ç¼–è¯‘å¹¶é›†æˆæ‰€éœ€çš„åŒ…åˆ°é¡¹ç›®ä¸­ã€‚\n2.2. sonar-project.properties ä»£ç è´¨é‡ç®¡ç†ç›¸å…³çš„æ–‡ä»¶ã€‚\n2.3. SECURITY.md å£°æ˜å®‰å…¨ç­–ç•¥å’Œæ¼æ´ç®¡ç†æµç¨‹ã€‚\n2.4. RESEUE.toml ç»Ÿä¸€ç®¡ç†Deskflowé¡¹ç›®çš„ç‰ˆæƒå½’å±å’Œè®¸å¯è¯å£°æ˜ï¼Œç¡®ä¿æ‰€æœ‰æ–‡ä»¶ç¬¦åˆå¼€æºåˆè§„è¦æ±‚ã€‚\n2.5. LICENSE ç»Ÿä¸€ç®¡ç†Deskflowé¡¹ç›®çš„ç‰ˆæƒå½’å±å’Œè®¸å¯è¯å£°æ˜ï¼Œç¡®ä¿æ‰€æœ‰æ–‡ä»¶ç¬¦åˆå¼€æºåˆè§„è¦æ±‚ã€‚\n2.6. cspell.json æ‹¼å†™æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ Deskflow é¡¹ç›®ä¸­å…è®¸çš„ç‰¹å®šæœ¯è¯­ã€æŠ€æœ¯è¯æ±‡å’Œä¸“æœ‰åè¯ï¼Œç¡®ä¿æ‹¼å†™æ£€æŸ¥å·¥å…·ï¼ˆå¦‚ VS Code çš„ Code Spell Checkerï¼‰åœ¨æ‰«æä»£ç æ—¶ å¿½ç•¥åˆæ³•è¯æ±‡ï¼ŒåŒæ—¶æ ‡è®°æ‹¼å†™é”™è¯¯ã€‚\n2.7. ç›®å½•LICENSES åŒ…å«å››ç§å¼€æºè®¸å¯è¯æ–‡ä»¶ï¼Œå®šä¹‰äº†é¡¹ç›®å„ç»„ä»¶çš„åˆæ³•ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘è§„åˆ™ã€‚\n2.8. ç›®å½•src åŒ…å«æºä»£ç æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸»ç¨‹åºã€å·¥å…·ç±»ã€é…ç½®æ–‡ä»¶ç­‰ã€‚\n2.9. ç›®å½•deploy éƒ¨ç½²è„šæœ¬,å®šä¹‰äº†åœ¨ä¸åŒå¹³å°ä¸Šçš„éƒ¨ç½²æ–¹æ³•.\n2.10. cmake cmakeæ¨¡å—,å®šä¹‰äº†cmakeçš„é…ç½®æ–‡ä»¶,è´Ÿè´£æ„å»ºè¿‡ç¨‹ä¸­çš„ä¾èµ–æ£€æŸ¥.\n2.11. doc æ–‡æ¡£,åŒ…æ‹¬ç”¨æˆ·æŒ‡å—ã€å¼€å‘æŒ‡å—ç­‰.\n3. å­ç›®å½•src 1 2 3 4 5 src/ â”œâ”€â”€ apps/ â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ lib/ â””â”€â”€ test/ é¢å¯¹ä¸€ä¸ªè½¯ä»¶,æˆ‘ä»¬å¯ä»¥å°†ä»£ç åˆ†ä¸ºä¸¤éƒ¨åˆ†: æ¶æ„å±‚ä»£ç ã€ä¸šåŠ¡å±‚ä»£ç ã€‚ apps: ä¸šåŠ¡å±‚ä»£ç ï¼ŒåŒ…å«äº†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å’ŒåŠŸèƒ½å®ç°ã€‚ lib: æ¶æ„å±‚ä»£ç ï¼ŒåŒ…å«äº†æ¡†æ¶ã€å·¥å…·ç±»ã€é…ç½®æ–‡ä»¶ç­‰ã€‚ test: æµ‹è¯•ä»£ç ï¼ŒåŒ…å«äº†å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰ã€‚\n3.2. apps 1 2 3 4 5 6 7 8 apps/ â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ deskflow-client/ â”œâ”€â”€ deskflow-core/ â”œâ”€â”€ deskflow-daemon/ â”œâ”€â”€ deskflow-gui/ â”œâ”€â”€ deskflow-server/ â””â”€â”€ res appsç›®å½•ä¸‹å°±æ˜¯ä¸šåŠ¡å±‚çš„ä»£ç äº†ï¼Œé€šè¿‡ç¬¬ä¸€èŠ‚ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒDeskFlowè¿™ä¸ªè½¯ä»¶æ˜¯ä¸€ä¸ªâ€œæœåŠ¡å™¨ï¼å®¢æˆ·ç«¯â€çš„æ¨¡å¼ï¼ŒDeskFlowç¼–è¯‘æˆåŠŸåæœ‰ï¼“ä¸ªå¯æ‰§è¡Œæ–‡ä»¶: deskflowã€deskflow-serverã€deskflow-clientã€‚ deskflow-server:\nå°±æ˜¯æœåŠ¡ç«¯ä»£ç ï¼Œä¹Ÿå°±è¿è¡Œåœ¨å®é™…æ’å…¥ç‰©ç†é”®ç›˜é¼ æ ‡çš„ç”µè„‘ä¸Š; deskflow-client: å°±æ˜¯å®¢æˆ·ç«¯ä»£ç ï¼Œå’ŒæœåŠ¡ç«¯ç›¸å¯¹; deskflow-core: deskflowå°±æ˜¯deskflow-coreç¨‹åºï¼Œæ—¢æ˜¯å®¢æˆ·ç«¯ä¹Ÿæ˜¯æœåŠ¡ç«¯ï¼Œè¿è¡Œæ˜¯æ ¹æ®ä¼ å…¥çš„å‘½ä»¤è¡Œå‚æ•°æ¥åˆ¤æ–­æ˜¯è¿è¡Œä¸ºæœåŠ¡ç«¯è¿˜æ˜¯è¿è¡Œä¸ºå®¢æˆ·ç«¯ã€‚ deskflow-gui: GUIä»£ç ï¼ŒåŸºäºQtã€‚\n3.1. lib DeskFlowçš„åº•å±‚é€»è¾‘ï¼Œæ¯”å¦‚è·¨å¹³å°æŠ½è±¡å±‚ã€‚\n","date":"2025-05-06T20:36:33+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC%E4%BA%8C%E8%8A%82-deskflow%E5%B7%A5%E7%A8%8B%E6%BA%90%E7%A0%81%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86/","title":"ç¬¬äºŒèŠ‚ - DeskFlowå·¥ç¨‹æºç æ•´ä½“è®¤è¯†"},{"content":"1. Deskflowä»‹ç» åœ¨å¤šå°ç”µè„‘ä¸Šå…±äº«ä¸€å¥—é”®é¼ ï¼Œæ”¯æŒWindowsã€Linuxã€MacOSï¼ŒåŠŸèƒ½ç±»ä¼¼äºä¸€ä¸ªåŸºäºè½¯ä»¶çš„KVMåˆ‡æ¢å™¨ï¼Œåœ¨ä¸åŒæœºå™¨ä¹‹é—´æ— ç¼åˆ‡æ¢ã€‚ æœ¬ä¸“é¢˜ä¸­ï¼Œæˆ‘ä»¬ä»¥1.21.2ç‰ˆæœ¬ä¸ºä¾‹ï¼Œä»‹ç»ä¸€ä¸‹è½¯ä»¶çš„åŠŸèƒ½ï¼Œé¡¹ç›®åœ°å€Deskflowã€‚\n2. åŠŸèƒ½ é¦–æ¬¡å¯åŠ¨è½¯ä»¶æ—¶ï¼Œéœ€è¦é€‰æ‹©å½“å‰çš„ç”µè„‘æ¨¡å¼ï¼Œæ˜¯ä½œä¸ºæœåŠ¡ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯ï¼Œç•Œé¢å¦‚ä¸‹ï¼š æ¥å…¥ç‰©ç†é”®ç›˜é¼ æ ‡çš„å°±æ˜¯æœåŠ¡ç«¯ï¼Œå…¶ä»–ç”µè„‘å°±æ˜¯å®¢æˆ·ç«¯ã€‚\n3. è½¯ä»¶é…ç½® ã€Editã€‘\u0026ndash;\u0026gt;ã€Preferencesã€‘ æœ‰ä¸‰é¡¹é…ç½®ï¼šBasicsã€APPã€Enable TSL Encryptionã€‚\n1. Basicsï¼š\né˜»æ­¢è®¡ç®—æœºä¼‘çœ ã€‚ ä½¿ç”¨æœåŠ¡å™¨é”®ç›˜è¯­è¨€ï¼ˆè¯¥é…ç½®åœ¨å®¢æˆ·ç«¯ä¸Šä½¿ç”¨ï¼‰ï¼Œå› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é”®ç›˜è¯­è¨€å¯èƒ½ä¸ä¸€è‡´ï¼Œç»Ÿä¸€ä½¿ç”¨æœåŠ¡å™¨é”®ç›˜è¯­è¨€ï¼Œè¿™æ ·å°±ä¸€è‡´äº†ã€‚ åè½¬é¼ æ ‡æ»šè½®æ»šåŠ¨æ—¶é¡µé¢æ»šåŠ¨æ–¹å‘ï¼ˆè¯¥é…ç½®åœ¨å®¢æˆ·ç«¯ä¸Šä½¿ç”¨ï¼‰ï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªä¸ªæ€§åŒ–é…ç½®ã€‚ 2. APPï¼š\nåº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–°ã€‚ å…³é—­åº”ç”¨çª—å£æ—¶ï¼Œåå°è¿è¡Œã€‚ åå°å¯åŠ¨ã€‚ Tray Icon styleï¼Œç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡æ ·å¼ã€‚ 3. Enable TSL Encryptionï¼š\nå¯ç”¨TSLåŠ å¯†ï¼Œè¿™æ˜¯ä¸€ä¸ªå®‰å…¨é…ç½®ã€‚ Network Addressï¼Œé…ç½®ç½‘ç»œåœ°å€ï¼Œé»˜è®¤å³å¯ã€‚ Logsï¼Œé…ç½®æ—¥å¿—æ–‡ä»¶ä¿å­˜è·¯å¾„ã€æ—¥å¿—çº§åˆ«ã€‚ æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åœ¨è¿™ä¸€å±‚é¢çš„é…ç½®ç•Œé¢æ˜¯ä¸€æ ·çš„ã€‚\n4. æœåŠ¡ç«¯ (1) åŠ è½½å·²æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ç°æˆçš„é…ç½®æ–‡ä»¶ï¼Œå°±ç‚¹å‡»ã€Configure Serverã€‘ã€‚\n(2) é…ç½®æœåŠ¡å™¨ä¿¡æ¯ï¼Œç•Œé¢å¦‚ä¸‹ï¼š ã€Computersã€‘\nè¯¥é¡¹è®¾ç½®é…ç½®å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„å¸ƒå±€ï¼Œä¸­é—´çš„GEM12æ˜¯æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘¨å›´çš„æ ¼å­ç”¨äºæ”¾ç½®å®¢æˆ·ç«¯ï¼Œé€šè¿‡æ‹–åŠ¨å³ä¸Šè§’çš„ç”µè„‘å›¾æ ‡æ¥åˆ›å»ºå®¢æˆ·ç«¯PCï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åŒå‡»åˆ›å»ºçš„å®¢æˆ·ç«¯PCï¼Œå°±å¯ä»¥é…ç½®å®¢æˆ·ç«¯çš„ä¿¡æ¯äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¯¥é¡µé¢ä¸­éœ€è¦æ³¨æ„çš„æ˜¯Fixesï¼Œéƒ¨åˆ†æŒ‰é”®åœ¨ä¸€äº›å¹³å°ä¸Šä¸å¯ç”¨ï¼Œå¯ä»¥é€šè¿‡Fixesæ¥ä¿®å¤ï¼Œä¾‹å¦‚åœ¨Linuxç³»ç»Ÿä¸ŠScroll Locké”®ä¸å¯ç”¨ã€‚\n5. é”®é¼ åœ¨PCä¹‹é—´çš„åˆ‡æ¢é€»è¾‘ çº¢æ¡†åŒºåŸŸæä¾›äº†ä¸¤ç§åˆ‡æ¢æ–¹å¼ï¼š\nåœ¨ä¸¤å°PCä¹‹é—´çš„è¾¹ç•Œè¶…è¿‡æŒ‡å®šæ—¶é—´åˆ‡æ¢åˆ°å¯¹åº”çš„PCã€‚ åœ¨æŒ‡å®šçš„æ—¶é—´å†…ï¼Œä¸¤æ¬¡tapåˆ‡æ¢åˆ°å¯¹åº”çš„PCï¼Œè¿™ä¸ªæ²¡æœ‰å¥½åƒæœ‰BUGï¼Œä¸èµ·ä½œç”¨ã€‚ 6. å®¢æˆ·ç«¯ å®¢æˆ·ç«¯é…ç½®ï¼š ã€3. è½¯ä»¶é…ç½®ã€‘\nå®¢æˆ·ç«¯ä½¿ç”¨ï¼š è¾“å…¥æœåŠ¡å™¨IPæˆ–è€…æœåŠ¡å™¨åç§°ï¼Œç„¶åç‚¹å‡»è¿æ¥ã€‚\n","date":"2025-05-06T20:36:33+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC%E4%B8%80%E8%8A%82-desklow%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/","title":"ç¬¬ä¸€èŠ‚ - Desklowåˆæ­¥è®¤è¯†"},{"content":"Qemuä»‹ç» Qemuï¼ˆQuick Emulatorï¼‰ï¼Œä¸€æ¬¾å¼€æºçš„ç¡¬ä»¶è™šæ‹ŸåŒ–å’Œä»¿çœŸå·¥å…·ï¼ŒQemuæœ¬èº«å¯ä»¥è¿è¡Œåœ¨å¤šç§å¹³å°ä¸Šï¼ˆx86ã€ARMã€RISC-Vï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¨¡æ‹Ÿå¤šç§è™šæ‹Ÿæœºã€‚WMwareã€VirtualBoxç­‰è™šæ‹ŸåŒ–è™šæ‹ŸåŒ–å¹³å°åªèƒ½è¿è¡Œåœ¨x86å¹³å°ä¸Šï¼Œä¹Ÿåªèƒ½æ¨¡æ‹ŸX86ç¯å¢ƒï¼Œè€ŒQemuå¯ä»¥è¿è¡Œåœ¨å¤šç§å¹³å°ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¨¡æ‹Ÿå¤šç§è™šæ‹Ÿæœºã€‚ Qemuçš„ç³»ç»Ÿæ¨¡å¼å’Œç”¨æˆ·æ¨¡å¼ï¼Œç³»ç»Ÿæ¨¡å¼å°±æ˜¯æ¨¡æ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶ç¯å¢ƒï¼Œåœ¨è¿™ä¸ªè™šæ‹Ÿçš„ç¡¬ä»¶ä¸Šå®‰è£…æ“ä½œç³»ç»Ÿï¼Œç”¨æˆ·æ¨¡å¼å°±æ˜¯ç›´æ¥è¿è¡Œä¸ºå¦ä¸€ä¸ªæ“ä½œç³»ç»Ÿå¼€å‘çš„ç¨‹åºã€‚ qmuä»“åº“ https://gitlab.com/qemu-project/qemu wiki https://wiki.qemu.org/Hosts/Linux\nAMD64å¹³å°ç¼–è¯‘Qemu ä»¥Fedora42ä¸ºä¾‹ï¼Œç¼–è¯‘Qemuã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 Build targets in project: 643 qemu 9.2.2 Build environment Build directory : /home/zcli/test/qemu-9.2.2/build Source path : /home/zcli/test/qemu-9.2.2 Download dependencies : YES Directories Build directory : /home/zcli/test/qemu-9.2.2/build Source path : /home/zcli/test/qemu-9.2.2 Download dependencies : YES Install prefix : /usr/local BIOS directory : share/qemu firmware path : share/qemu-firmware binary directory : /usr/local/bin library directory : /usr/local/lib64 module directory : lib64/qemu libexec directory : /usr/local/libexec include directory : /usr/local/include config directory : /usr/local/etc local state directory : /var/local Manual directory : /usr/local/share/man Doc directory : /usr/local/share/doc Host binaries python : /home/zcli/test/qemu-9.2.2/build/pyvenv/bin/python3 (version: 3.13) sphinx-build : NO gdb : /usr/bin/gdb iasl : NO genisoimage : Configurable features Documentation : NO system-mode emulation : YES user-mode emulation : NO block layer : YES Install blobs : YES module support : NO fuzzing support : NO Audio drivers : oss Trace backends : log D-Bus display : YES QOM debugging : YES Relocatable install : YES vhost-kernel support : YES vhost-net support : YES vhost-user support : YES vhost-user-crypto support : YES vhost-user-blk server support : YES vhost-vdpa support : YES build guest agent : YES Compilation host CPU : x86_64 host endianness : little C compiler : cc -m64 Host C compiler : cc -m64 C++ compiler : NO Objective-C compiler : NO Rust support : NO CFLAGS : -g -O2 QEMU_CFLAGS : -mcx16 -msse2 -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -fno-strict-aliasing -fno-common -fwrapv -ftrivial-auto-var-init=zero -fzero-call-used-regs=used-gpr -fstack-protector-strong QEMU_LDFLAGS : -fstack-protector-strong -Wl,-z,relro -Wl,-z,now link-time optimization (LTO) : NO PIE : YES static build : NO malloc trim support : YES membarrier : NO debug graph lock : NO debug stack usage : NO mutex debugging : NO memory allocator : system avx2 optimization : YES avx512bw optimization : YES gcov : NO thread sanitizer : NO CFI support : NO strip binaries : NO sparse : NO mingw32 support : NO Cross compilers x86_64 : cc Targets and accelerators KVM support : YES HVF support : NO WHPX support : NO NVMM support : NO Xen support : NO Xen emulation : YES TCG support : YES TCG backend : native (x86_64) TCG plugins : YES TCG debug enabled : NO target list : x86_64-softmmu default devices : YES out of process emulation : YES vfio-user server : NO Block layer support coroutine backend : ucontext coroutine pool : YES Block whitelist (rw) : Block whitelist (ro) : Use block whitelist in tools : NO VirtFS (9P) support : YES replication support : YES bochs support : YES cloop support : YES dmg support : YES qcow v1 support : YES vdi support : YES vhdx support : YES vmdk support : YES vpc support : YES vvfat support : YES qed support : YES parallels support : YES FUSE exports : NO VDUSE block exports : YES Crypto TLS priority : NORMAL GNUTLS support : YES 3.8.9 GNUTLS crypto : YES libgcrypt : NO nettle : NO SM4 ALG support : NO SM3 ALG support : NO AF_ALG support : NO rng-none : NO Linux keyring : YES Linux keyutils : YES 1.6.3 User interface SDL support : NO SDL image support : NO GTK support : YES pixman : YES 0.44.2 VTE support : YES 0.80.1 PNG support : YES 1.6.44 VNC support : YES VNC SASL support : YES VNC JPEG support : YES 3.1.0 spice protocol support : YES 0.14.4 spice server support : YES 0.15.1 curses support : YES brlapi support : NO Graphics backends VirGL support : NO Rutabaga support : NO Audio backends OSS support : YES sndio support : NO ALSA support : NO PulseAudio support : NO PipeWire support : NO JACK support : NO Network backends AF_XDP support : NO slirp support : NO vde support : NO netmap support : NO l2tpv3 support : YES Dependencies libtasn1 : YES 4.20.0 PAM : NO iconv support : YES blkio support : NO curl support : NO Multipath support : NO Linux AIO support : NO Linux io_uring support : NO ATTR/XATTR support : YES RDMA support : NO fdt support : YES libcap-ng support : NO bpf support : NO rbd support : NO smartcard support : YES 2.8.1 U2F support : NO libusb : YES 1.0.28 usb net redir : YES 0.15.0 OpenGL support (epoxy) : YES 1.5.10 GBM : YES 25.0.4 libiscsi support : NO libnfs support : NO seccomp support : NO GlusterFS support : NO hv-balloon support : YES TPM support : YES libssh support : NO lzo support : NO snappy support : NO bzip2 support : YES lzfse support : NO zstd support : YES 1.5.7 Query Processing Library support: NO UADK Library support : NO qatzip support : NO NUMA host support : NO capstone : NO libpmem support : NO libdaxctl support : NO libcbor support : NO libudev : YES 257 FUSE lseek : NO selinux : YES 3.8 libdw : YES 0.192 Subprojects berkeley-softfloat-3 : YES berkeley-testfloat-3 : YES keycodemapdb : YES libvduse : YES libvhost-user : YES User defined options Native files : config-meson.cross docs : disabled plugins : true Found ninja-1.12.1 at /usr/bin/ninja Running postconf script \u0026#39;/home/zcli/test/qemu-9.2.2/build/pyvenv/bin/python3 /home/zcli/test/qemu-9.2.2/scripts/symlink-install-tree.py\u0026#39; Fedora42å®‰è£…virt-manager virt-manageræ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„è™šæ‹Ÿæœºç®¡ç†å·¥å…·ï¼Œå®ƒå¯ä»¥ç®¡ç†è™šæ‹Ÿæœºçš„åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ç­‰æ“ä½œã€‚å®‰è£…virt-manageræ—¶ä¼šå®‰è£…å¹³å°å¯¹åº”çš„Qemuç»„ä»¶ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 zcli@fedora:~$ sudo yum install virt-manager.noarch ä»“åº“æ›´æ–°å’ŒåŠ è½½ä¸­: ä»“åº“åŠ è½½å®Œæˆã€‚ Package Arch Version Repository Size Installing: virt-manager noarch 5.0.0-2.fc42 fedora 3.5 MiB Installing dependencies: SDL2_image x86_64 2.8.8-1.fc42 fedora 209.7 KiB device-mapper-multipath-libs x86_64 0.10.0-5.fc42 fedora 873.7 KiB kf5-filesystem x86_64 5.116.0-4.fc42 fedora 1.4 KiB libblkio x86_64 1.5.0-2.fc41 fedora 664.2 KiB libburn x86_64 1.5.6-6.fc42 fedora 357.5 KiB libisoburn x86_64 1.5.6-7.fc42 fedora 1.1 MiB libisofs x86_64 1.5.6-6.fc42 fedora 508.3 KiB libnfs x86_64 6.0.2-2.fc42 fedora 518.1 KiB libvirt-ssh-proxy x86_64 11.0.0-1.fc42 fedora 19.9 KiB python3-libxml2 x86_64 2.12.10-1.fc42 fedora 1.2 MiB qemu-audio-alsa x86_64 2:9.2.3-1.fc42 updates 28.5 KiB qemu-audio-dbus x86_64 2:9.2.3-1.fc42 updates 268.0 KiB qemu-audio-jack x86_64 2:9.2.3-1.fc42 updates 19.9 KiB qemu-audio-oss x86_64 2:9.2.3-1.fc42 updates 19.7 KiB qemu-audio-pa x86_64 2:9.2.3-1.fc42 updates 27.8 KiB qemu-audio-pipewire x86_64 2:9.2.3-1.fc42 updates 44.6 KiB qemu-audio-sdl x86_64 2:9.2.3-1.fc42 updates 19.7 KiB qemu-audio-spice x86_64 2:9.2.3-1.fc42 updates 15.7 KiB qemu-block-blkio x86_64 2:9.2.3-1.fc42 updates 36.1 KiB qemu-block-curl x86_64 2:9.2.3-1.fc42 updates 32.2 KiB qemu-block-dmg x86_64 2:9.2.3-1.fc42 updates 11.2 KiB qemu-block-gluster x86_64 2:9.2.3-1.fc42 updates 31.5 KiB qemu-block-iscsi x86_64 2:9.2.3-1.fc42 updates 50.5 KiB qemu-block-nfs x86_64 2:9.2.3-1.fc42 updates 28.8 KiB qemu-block-rbd x86_64 2:9.2.3-1.fc42 updates 40.9 KiB qemu-block-ssh x86_64 2:9.2.3-1.fc42 updates 42.5 KiB qemu-char-baum x86_64 2:9.2.3-1.fc42 updates 19.5 KiB qemu-char-spice x86_64 2:9.2.3-1.fc42 updates 20.4 KiB qemu-device-display-qxl x86_64 2:9.2.3-1.fc42 updates 88.6 KiB qemu-device-display-vhost-user-gpu x86_64 2:9.2.3-1.fc42 updates 746.1 KiB qemu-device-display-virtio-gpu-ccw x86_64 2:9.2.3-1.fc42 updates 11.4 KiB qemu-device-display-virtio-gpu-gl x86_64 2:9.2.3-1.fc42 updates 46.3 KiB qemu-device-display-virtio-gpu-pci x86_64 2:9.2.3-1.fc42 updates 15.5 KiB qemu-device-display-virtio-gpu-pci-gl x86_64 2:9.2.3-1.fc42 updates 11.0 KiB qemu-device-display-virtio-gpu-pci-rutabaga x86_64 2:9.2.3-1.fc42 updates 11.2 KiB qemu-device-display-virtio-gpu-rutabaga x86_64 2:9.2.3-1.fc42 updates 38.3 KiB qemu-device-display-virtio-vga-gl x86_64 2:9.2.3-1.fc42 updates 11.2 KiB qemu-device-display-virtio-vga-rutabaga x86_64 2:9.2.3-1.fc42 updates 11.2 KiB qemu-device-usb-host x86_64 2:9.2.3-1.fc42 updates 48.8 KiB qemu-device-usb-redirect x86_64 2:9.2.3-1.fc42 updates 68.8 KiB qemu-device-usb-smartcard x86_64 2:9.2.3-1.fc42 updates 32.6 KiB qemu-kvm x86_64 2:9.2.3-1.fc42 updates 0.0 B qemu-pr-helper x86_64 2:9.2.3-1.fc42 updates 973.1 KiB qemu-system-x86 x86_64 2:9.2.3-1.fc42 updates 0.0 B qemu-ui-curses x86_64 2:9.2.3-1.fc42 updates 39.6 KiB qemu-ui-egl-headless x86_64 2:9.2.3-1.fc42 updates 15.5 KiB qemu-ui-gtk x86_64 2:9.2.3-1.fc42 updates 78.3 KiB qemu-ui-opengl x86_64 2:9.2.3-1.fc42 updates 36.3 KiB qemu-ui-sdl x86_64 2:9.2.3-1.fc42 updates 44.8 KiB qemu-ui-spice-app x86_64 2:9.2.3-1.fc42 updates 15.4 KiB qemu-ui-spice-core x86_64 2:9.2.3-1.fc42 updates 59.8 KiB rutabaga-gfx-ffi x86_64 0.1.3-3.fc42 fedora 607.3 KiB virglrenderer x86_64 1.1.0-2.fc42 fedora 1.1 MiB virt-manager-common noarch 5.0.0-2.fc42 fedora 6.2 MiB virtiofsd x86_64 1.13.0-2.fc42 fedora 2.5 MiB xorriso x86_64 1.5.6-7.fc42 fedora 341.6 KiB Installing weak dependencies: libvirt-daemon-kvm x86_64 11.0.0-1.fc42 fedora 0.0 B Transaction Summary: Installing: 58 packages ","date":"2025-05-05T23:36:36+08:00","image":"https://zuoco.github.io/p/qemu%E4%BB%8B%E7%BB%8D/AAA_hu_c1639a94b96af9d0.jpg","permalink":"https://zuoco.github.io/p/qemu%E4%BB%8B%E7%BB%8D/","title":"Qemuä»‹ç»"},{"content":"1. ä»€ä¹ˆæ˜¯å®¹å™¨ å°±æ˜¯ä¸€äº›æ ‡å‡†åº“ä¸­è®¾è®¡å¥½æ•°æ®ç»“æ„ï¼Œä½¿ç”¨ç±»æ¨¡æ¿å®ç°ï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç†æ•°æ®ï¼Œæ”¯æŒå¯¹è±¡çš„æ·»åŠ ã€åˆ é™¤ã€ç´¢å¼•ã€éå†ç­‰åŠŸèƒ½ã€‚\n2. å®¹å™¨åˆ†ç±» 2.1. åºåˆ—å®¹å™¨ å®¹å™¨æˆå‘˜æŒ‰ä¸¥æ ¼çš„çº¿æ€§é¡ºåºæ’åˆ—ï¼Œä¾‹å¦‚ï¼šarrayã€vectorã€listã€forward_listã€dequeã€basic_stringã€‚\n2.2. å…³è”å®¹å™¨ å°±æ˜¯â€œé”®å€¼å¯¹â€ï¼š set/map/multiset/multimapåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘å®ç°ã€‚\nunordered_set/unordered_map/unordered_multiset/unordered_multimapåº•å±‚ä½¿ç”¨å“ˆå¸Œè¡¨å®ç°ã€‚\n2.3. é€‚é…å™¨ å¯¹åŸæœ‰å®¹å™¨è¿›è¡ŒåŒ…è£…ã€æ‰©å±•ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°å®¹å™¨ã€‚\n2.4. ç”Ÿæˆå™¨ æ„é€ å…ƒç´ åºåˆ—ã€‚\n3. å®¹å™¨è¿­ä»£å™¨ æŒ‡å®šå®¹å™¨ä¸­çš„ä¸€æ®µåŒºé—´ï¼Œç”¨äºéå†å®¹å™¨ä¸­çš„å…ƒç´ ã€‚ å¸¸ç”¨è¿­ä»£å™¨ï¼š\n1 2 begin()ï¼š end()ï¼š 1 2 rbegin()ï¼š rend()ï¼š # æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„å‰ä¸€ä¸ªä½ç½® 1 cbegin()ï¼š 1 2 crbegin()ï¼š crend()ï¼š è¿­ä»£å™¨åˆ†ä¸º5ç±»ï¼Œæ”¯æŒçš„æ“ä½œé›†åˆä¸åŒã€‚\nä¸æ˜¯æ‰€æœ‰çš„å®¹å™¨éƒ½æ”¯æŒè¿­ä»£å™¨ï¼Œæ”¯æŒè¿­ä»£å™¨çš„å®¹å™¨ç§°ä¸ºrangeã€‚\n","date":"2025-05-04T00:00:00Z","permalink":"https://zuoco.github.io/p/%E7%AC%AC1%E8%8A%82-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%B9%E5%99%A8%E5%AE%B9%E5%99%A8%E5%88%86%E7%B1%BB/","title":"ç¬¬1èŠ‚ - ä»€ä¹ˆæ˜¯å®¹å™¨ã€å®¹å™¨åˆ†ç±»"},{"content":"1. operator\u0026lt;=\u0026gt; \u0026lt;=\u0026gt;ç›®çš„åœ¨äºç®€åŒ–è‡ªå®šä¹‰ç±»å‹çš„æ¯”è¾ƒé€»è¾‘ï¼Œåªè¦å®ç°äº†\u0026lt;=\u0026gt;å’Œ==ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨ç”Ÿæˆå…¶ä»–æ¯”è¾ƒè¿ç®—é€»è¾‘ã€‚\nè¿”å›å€¼ç±»å‹ä¸ºä¸‰ç§æ¯”è¾ƒç±»åˆ«ç±»å‹ï¼š\n1 2 3 std::strong_ordering std::weak_ordering std::partial_ordering ä¸‹é¢ä»‹ç»è¿™ä¸‰ç§æ¯”è¾ƒç±»å‹ï¼š\n1.1. std::strong_ordering å½“ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å­˜åœ¨å®Œå…¨å¯æ¯”è¾ƒçš„å¼ºåºå…³ç³»æ—¶ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å¯ä»¥æ˜ç¡®çš„åˆ¤æ–­å‡ºè°å¤§è°å°ã€‚ è¿”å›å€¼ï¼š\n1 2 3 std::strong_ordering::less // å·¦æ“ä½œæ•°å°äºå³æ“ä½œæ•° std::strong_ordering::equal // å·¦æ“ä½œæ•°ç­‰äºå³æ“ä½œæ•° std::strong_ordering::greater // å·¦æ“ä½œæ•°å¤§äºå³æ“ä½œæ•° 1.2. std::weak_ordering å½“ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å­˜åœ¨å¼±åºå…³ç³»æ—¶ï¼Œè¿™æ„å‘³ç€ä¸¤è€…ä¹‹é—´å¯ä»¥æ¯”è¾ƒå¤§å°ï¼Œä½†æ˜¯æœ‰æ—¶ä¸ä¼šå®Œå…¨ç›¸ç­‰ï¼Œæ¯”å¦‚è¯´å¤§å°å†™ï¼Œä½†æ˜¯std::weak_orderingä¾ç„¶è§†ä¸ºç›¸ç­‰ï¼Œæ‰€ä»¥åœ¨éœ€è¦å¿½ç•¥å¤§å°å†™æ—¶ï¼Œä»¥åŠå…¶ä»–å°†â€œéå®Œå…¨ç›¸ç­‰â€è§†ä¸ºâ€œç›¸ç­‰â€æ—¶ï¼Œä½¿ç”¨std::weak_orderingã€‚ è¿”å›å€¼ï¼š\n1 2 3 std::weak_ordering::less // å·¦æ“ä½œæ•°å°äºå³æ“ä½œæ•° std::weak_ordering::equivalent // å·¦æ“ä½œæ•°ç­‰äºå³æ“ä½œæ•° std::weak_ordering::greater // å·¦æ“ä½œæ•°å¤§äºå³æ“ä½œæ•° 1.3. std::partial_ordering å¦‚æœä¸¤ä¸ªå¯¹è±¡åœ¨æŸäº›æƒ…å†µä¸‹æ— æ³•è¿›è¡Œå¯¹æ¯”ï¼Œä¾‹å¦‚:\n1 2 double x = 1.0/0.0; //InF double y = 1.0/0.0; //NaN aå’Œbçš„å€¼æ— æ³•è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è¿”å›std::partial_ordering::unorderedã€‚ è¿”å›å€¼ï¼š\n1 2 3 4 std::partial_ordering::less // å·¦æ“ä½œæ•°å°äºå³æ“ä½œæ•° std::partial_ordering::equivalent // å·¦æ“ä½œæ•°ç­‰äºå³æ“ä½œæ•° std::partial_ordering::greater // å·¦æ“ä½œæ•°å¤§äºå³æ“ä½œæ•° std::partial_ordering::unordered // å·¦æ“ä½œæ•°å’Œå³æ“ä½œæ•°ä¸ç›¸ç­‰ 2. ç±»å‹è½¬æ¢ std::strong_orderingå¯ä»¥éšå¼è½¬æ¢ä¸ºstd::weak_orderingï¼Œ\nstd::weak_orderingå¯ä»¥éšå¼è½¬æ¢ä¸ºstd::partial_orderingã€‚\nå®ç° å¯¹äºç®€å•ç±»å‹ï¼Œä½¿ç”¨**=default**ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆæ¯”è¾ƒé€»è¾‘ï¼Œå¯¹äºå¤æ‚ç±»å‹éœ€è¦æ‰‹åŠ¨å®ç°æ¯”è¾ƒé€»è¾‘ã€‚\n","date":"2025-05-04T00:00:00Z","image":"https://zuoco.github.io/p/%E4%B8%89%E8%B7%AF%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6/AAA_hu_c7ffdc190379ce2e.jpg","permalink":"https://zuoco.github.io/p/%E4%B8%89%E8%B7%AF%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6/","title":"ä¸‰è·¯æ¯”è¾ƒè¿ç®—ç¬¦"},{"content":"1. vector æ¨¡æ¿ç±»ï¼ŒåŠ¨æ€æ•°ç»„ï¼Œç»´æŠ¤ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œå®¹é‡å¯åŠ¨æ€æ”¹å˜ã€‚ size: å½“å‰å…ƒç´ ä¸ªæ•°ã€‚ cap: å½“å‰å®¹é‡ã€‚ buffer: æŒ‡å‘ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ã€‚\n2. å®¹é‡ emptyã€sizeï¼Œcapacityæ–¹æ³•ã€‚ shrink_to_fit()ï¼Œå¦‚æœä¸å†éœ€è¦å¡«å……å…ƒç´ äº†ï¼Œé‚£å°±å¯ä»¥è°ƒç”¨shrink_to_fit()æ–¹æ³•ï¼Œå°†å®¹é‡ç¼©å‡åˆ°sizeå¤§å°ã€‚æœ¬è´¨å°±æ˜¯åœ¨ç”³è¯·ä¸€å—sizeå¤§å°çš„å†…å­˜ï¼Œç„¶åå°†åŸæ¥çš„å…ƒç´ æ‹·è´åˆ°æ–°çš„å†…å­˜ä¸­ï¼Œç„¶åé‡Šæ”¾åŸæ¥çš„å†…å­˜ã€‚ 3. è®¿é—® ä¸‹æ ‡è®¿é—®ï¼Œå’Œarrayä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨[]è®¿é—®å…ƒç´ ã€‚ æ”¯æŒfrontã€backã€dataæ–¹æ³•ã€‚ swapæ–¹æ³•ï¼Œäº¤æ¢ä¸¤ä¸ªvectorå¯¹è±¡ï¼Œå®é™…æ˜¯äº¤æ¢æŒ‡é’ˆï¼Œæ‰€ä»¥æ¯”arrayè¦å¿«(æ³¨æ„æ˜¯äº¤æ¢ä¸¤ä¸ªvectorå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªvectorå¯¹è±¡ä¸­çš„ä¸¤ä¸ªå…ƒç´ )ã€‚ å…³äºswapæ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªå¸¸ç”¨çš„æŠ€å·§æ˜¯ç»“åˆå®ƒæ¥â€œæ¸…ç©ºâ€ä¸€ä¸ªå‘é‡å¹¶é‡Šæ”¾å…¶å†…å­˜: 1 std::vector\u0026lt;int\u0026gt;().swap(vec1); std::vector\u0026lt;int\u0026gt;() åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶çš„ã€ç©ºçš„ vector å¯¹è±¡ï¼Œ.swap(vec1) è°ƒç”¨äº†è¿™ä¸ªä¸´æ—¶å¯¹è±¡çš„ swap æ–¹æ³•ï¼Œå°†å®ƒä¸ vec1 çš„å†…å®¹äº¤æ¢ã€‚\näº¤æ¢åï¼Œvec1 å˜æˆä¸€ä¸ªç©ºçš„ vectorï¼ˆå’Œä¸´æ—¶å¯¹è±¡äº¤æ¢åçš„ç»“æœï¼‰ï¼Œä¸´æ—¶å¯¹è±¡ç°åœ¨æŒæœ‰åŸæ¥ vec1 çš„æ‰€æœ‰å†…å­˜èµ„æºï¼Œå½“è¿™è¡Œè¯­å¥ç»“æŸæ—¶ï¼Œä¸´æ—¶å¯¹è±¡è¶…å‡ºä½œç”¨åŸŸå¹¶è¢«é”€æ¯ï¼Œå®ƒæ‰€æŒæœ‰çš„å†…å­˜ä¹Ÿè¢«ä¸€å¹¶é‡Šæ”¾ï¼Œå¦‚æœä½¿ç”¨clear()ï¼Œåˆ™vec1ä¼šè¢«æ¸…ç©ºï¼Œå®¹é‡æ²¡æœ‰é‡ç½®ï¼Œå†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ã€‚\n4. æ¯”è¾ƒ å’Œarrayä¸åŒï¼Œvectorçš„å¤§å°å¯ä»¥åŠ¨æ€æ”¹å˜ï¼Œå³ä½¿æ˜¯å¤§å°ä¸åŒçš„ä¸¤ä¸ªvectorå¯¹è±¡ä¹Ÿå¯ä»¥æ¯”è¾ƒï¼Œä½†æ˜¯å…ƒç´ ç±»å‹è¿˜æ˜¯è¦ç›¸åŒçš„ã€‚\n5. æ„é€ vectorå¯¹è±¡ 5.1. reserve 1 2 3 // æ„é€ ä¸€ä¸ªåˆå§‹å®¹é‡ä¸º1024çš„vectorå¯¹è±¡ã€‚ std::vector\u0026lt;int\u0026gt; v; v.reserve(1024); 1 2 // vecitorå¯¹è±¡çš„åˆå§‹å®¹é‡ä¸º6ï¼Œæ¯ä¸ªå…ƒç´ çš„å€¼éƒ½è¢«åˆå§‹åŒ–ä¸º1024ã€‚ std::vector\u0026lt;int\u0026gt; v(6, 1024); 5.2. push_backå’Œemplace_back ä¸¤è€…éƒ½æ˜¯å‘å®¹å™¨æœ«å°¾æ·»åŠ å…ƒç´ ï¼Œä½†æ˜¯å·¥ä½œåŸç†ä¸åŒï¼š\npush_back: å°†ä¸€ä¸ªå·²ç»æ„é€ å¥½çš„å¯¹è±¡æ·»åŠ åˆ°å®¹å™¨çš„æœ«å°¾ï¼Œè‹¥ä¼ é€’å³å€¼ï¼ˆå¦‚ä¸´æ—¶å¯¹è±¡ï¼‰ï¼Œä¼šè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆè‹¥å­˜åœ¨ï¼‰ï¼›è‹¥ä¼ é€’å·¦å€¼ï¼Œåˆ™è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æ¶‰åŠåˆ°æ‹·è´ã€‚\n1 2 3 4 std::vector\u0026lt;Person\u0026gt; vec; Person alice(\u0026#34;Alice\u0026#34;, 30); vec.push_back(alice); // æ‹·è´æ„é€  vec.push_back(Person(\u0026#34;Bob\u0026#34;, 25)); // ç§»åŠ¨æ„é€  emplace_back: ç›´æ¥ä¼ é€’æ„é€ å¯¹è±¡æ‰€éœ€çš„å‚æ•°åˆ—è¡¨ï¼Œé€šè¿‡å®Œç¾è½¬å‘åœ¨å®¹å™¨å†…å­˜ä¸­ç›´æ¥æ„é€ å¯¹è±¡ï¼Œé¿å…ä¸´æ—¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯åœ¨å®¹å™¨æœ«å°¾åŸåœ°æ„é€ ä¸€ä¸ªå¯¹è±¡å‡ºæ¥ã€‚\n1 vec.emplace_back(\u0026#34;Charlie\u0026#34;, 40); // ç›´æ¥æ„é€ ï¼Œæ— æ‹·è´æˆ–ç§»åŠ¨ 6. ç§»é™¤ 6.1. insertå’Œemplace ä¸¤è€…éƒ½æ˜¯å‘å®¹å™¨ä¸­æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ ï¼Œè¿”å›æŒ‡å‘æ–°æ’å…¥å…ƒç´ çš„è¿­ä»£å™¨ï¼ŒåŒºåˆ«å‚è€ƒpush_backå’Œemplace_backã€‚\nä¸¤ä¸ªç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯è¿­ä»£å™¨ï¼Œæ–°å…ƒç´ ä¼šæ’å…¥åˆ°è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ ä¹‹å‰ã€‚\ninsert:\n1 2 3 4 5 6 7 8 9 10 iterator insert( const_iterator pos, const T\u0026amp; value ); // (1) (constexpr since C++20) iterator insert( const_iterator pos, T\u0026amp;\u0026amp; value ); // (2) (since C++11) (constexpr since C++20) iterator insert( const_iterator pos, size_type count, const T\u0026amp; value ); // (3) (constexpr since C++20) template\u0026lt; class InputIt \u0026gt; iterator insert( const_iterator pos, InputIt first, InputIt last ); // (4) (constexpr since C++20) iterator insert( const_iterator pos, std::initializer_list\u0026lt;T\u0026gt; ilist ); emplace:\n1 2 template\u0026lt; class... Args \u0026gt; iterator emplace( const_iterator pos, Args\u0026amp;\u0026amp;... args ); //(since C++11) (constexpr since C++20) 6.2. pop_backå’Œeraseå’Œclear pop_back:\n1 void pop_back(); // (constexpr since C++20) ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ã€‚\nerase:\n1 2 iterator erase( const_iterator pos ); // (since C++11) (constexpr since C++20) iterator erase( const_iterator first, const_iterator last ); // (since C++11) (constexpr since C++20) ç§»é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œåè¾¹çš„å…ƒç´ è¦å‰ç§»ï¼Œå› ä¸ºvectoræ˜¯è¿ç»­å­˜å‚¨çš„ã€‚\nclear:\n1 void clear(); // (constexpr since C++20) ç§»é™¤ vector ä¸­æ‰€æœ‰å…ƒç´ ï¼Œä½¿å…¶size()å˜ä¸º0ï¼Œä½†æ˜¯å®¹é‡ï¼ˆcapacity()ï¼‰ä¸å˜ã€‚clear() ä¼šéå†å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶è°ƒç”¨å…¶ææ„å‡½æ•°ã€‚è¿™ä¸€æ­¥çš„ç›®çš„æ˜¯é”€æ¯å¯¹è±¡çš„é€»è¾‘å†…å®¹ï¼ˆå¦‚é‡Šæ”¾å¯¹è±¡å†…éƒ¨åŠ¨æ€åˆ†é…çš„èµ„æºï¼‰ï¼Œä½†vectorå¯¹è±¡ç”³è¯·çš„å†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ã€‚\n7. å†…å­˜é‡Šæ”¾ clear() ä¸é‡Šæ”¾å†…å­˜ï¼šè‹¥éœ€é‡Šæ”¾å†…å­˜ï¼Œéœ€æ‰‹åŠ¨è°ƒç”¨ shrink_to_fit()ï¼ˆä½†è¿™æ˜¯éå¼ºåˆ¶è¯·æ±‚ï¼‰ï¼š\n1 2 vec.clear(); vec.shrink_to_fit(); // è¯·æ±‚é‡Šæ”¾æœªä½¿ç”¨å†…å­˜ï¼Œcapacity() å¯èƒ½å˜ä¸º 0 æ›¿ä»£æ–¹æ¡ˆï¼šç›´æ¥èµ‹å€¼ç©ºå®¹å™¨ï¼ˆæ›´ç®€æ´ï¼‰ï¼š\n1 vec = {}; // ç­‰ä»·äº clear() + shrink_to_fit()ï¼ˆä¾èµ–å®ç°ï¼Œå¯èƒ½é‡Šæ”¾å†…å­˜ï¼‰ 8. å…¶ä»– ä¸æä¾›push_frontå’Œpop_frontæ–¹æ³•ã€‚ å†™æ“ä½œå¯èƒ½ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆï¼Œå°±æ˜¯å‘ç”Ÿå˜åŒ–äº†ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘çš„å·²ç»ä¸æ˜¯åŸæ¥çš„é‚£ä¸ªå…ƒç´ äº†ã€‚\n","date":"2025-05-04T00:03:33+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC2%E8%8A%82-%E5%BA%8F%E5%88%97%E5%AE%B9%E5%99%A8%E4%B9%8Bvector/","title":"ç¬¬2èŠ‚ - åºåˆ—å®¹å™¨ä¹‹vector"},{"content":"1. Array å…ƒç´ æ•°ä¸ªæ•°å›ºå®šï¼Œä¸èƒ½åŠ¨æ€æ”¹å˜ã€‚\n1 2 3 4 template\u0026lt; class T, std::size_t N \u0026gt; struct array; 2. ç”¨æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include \u0026lt;array\u0026gt; int main() { // 1. å£°æ˜ä¸€ä¸ªåŒ…å«5ä¸ªæ•´æ•°çš„æ•°ç»„ std::array\u0026lt;int, 5\u0026gt; arr = {1, 2, 3, 4, 5}; // std::array\u0026lt;int, 5\u0026gt; arr = {1}; å…¶åŒå…ƒç´ åˆå§‹åŒ–ä¸º0 // 2. è®¿é—®æ•°ç»„å…ƒç´  std::cout \u0026lt;\u0026lt; \u0026#34;First element: \u0026#34; \u0026lt;\u0026lt; arr[0] \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;Second element: \u0026#34; \u0026lt;\u0026lt; arr[1] \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;arr.at(10) = \u0026#34; \u0026lt;\u0026lt; arr.at(10) \u0026lt;\u0026lt; \u0026#39;\\n\u0026#39;; // è¶Šç•Œè®¿é—®ä¼šå´©æºƒ // 3. éå†æ•°ç»„ std::ranges::sort(arr); // ä½¿ç”¨ C++20 çš„ std::ranges::sort å¯¹ std::array æ’åº for (const auto\u0026amp; elem : arr) { std::cout \u0026lt;\u0026lt; elem \u0026lt;\u0026lt; \u0026#39; \u0026#39;; } std::cout \u0026lt;\u0026lt; \u0026#34;\\n\u0026#34;; // 4. è®¿é—®æ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´  std::cout \u0026lt;\u0026lt; \u0026#34;First element: \u0026#34; \u0026lt;\u0026lt; arr.front() \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;Last element: \u0026#34; \u0026lt;\u0026lt; arr.back() \u0026lt;\u0026lt; std::endl; } 2.1. åŸå§‹æ•°ç»„ è¿”å›ä¸€ä¸ªæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼äºCè¯­è¨€ä¸­çš„æ•°ç»„ç”¨æ³•ï¼Œç”¨åœ¨å’ŒCè¯­è¨€äº¤äº’çš„åœºæ™¯ä¸­ã€‚\n2.2. å®¹é‡æ–¹æ³• å¯¹äºstd::arrayï¼Œempty() ã€size() ã€max_size()ï¼Œè¿™äº›åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šäº†ï¼Œæ‰€ä»¥è¿è¡Œæ—¶è°ƒç”¨è¿™äº›æ–¹æ³•æ²¡æœ‰æ„ä¹‰ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦æä¾›è¿™äº›æ–¹æ³•å‘¢ï¼Ÿå› ä¸ºè¿™äº›æ–¹æ³•åœ¨å…¶ä»–å®¹å™¨ä¸­æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä¸ºäº†ç»Ÿä¸€æ¥å£ï¼Œè¿™äº›æ–¹æ³•åœ¨std::arrayä¸­ä¹Ÿæä¾›äº†ã€‚\n2.3. è¿­ä»£å™¨ ä»¥æ­£å‘è¿­ä»£å™¨ä¸ºä¾‹ï¼š\n1 2 3 4 5 std::cout \u0026lt;\u0026lt; \u0026#34;Using forward iterator:\\n\u0026#34;; for (auto it = arr.begin(); it != arr.end(); ++it) { std::cout \u0026lt;\u0026lt; *it \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; \u0026#34;\\n\u0026#34;; 2.4. æ•°ç»„å¡«å…… ç”¨äºå°†å®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è®¾ç½®ä¸ºæŒ‡å®šçš„å€¼ã€‚\n1 2 void fill( const T\u0026amp; value ); // (since C++11) // (constexpr since C++20) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #include \u0026lt;array\u0026gt; #include \u0026lt;cstddef\u0026gt; #include \u0026lt;iostream\u0026gt; int main() { constexpr std::size_t xy = 4; using Cell = std::array\u0026lt;unsigned char, 8\u0026gt;; std::array\u0026lt;Cell, xy * xy\u0026gt; board; board.fill({0xE2, 0x96, 0x84, 0xE2, 0x96, 0x80, 0, 0}); // \u0026#34;â–„â–€\u0026#34;; for (std::size_t count{}; Cell c : board) std::cout \u0026lt;\u0026lt; c.data() \u0026lt;\u0026lt; ((++count % xy) ? \u0026#34;\u0026#34; : \u0026#34;\\n\u0026#34;); } è¾“å‡ºï¼š\n1 2 3 4 â–„â–€â–„â–€â–„â–€â–„â–€ â–„â–€â–„â–€â–„â–€â–„â–€ â–„â–€â–„â–€â–„â–€â–„â–€ â–„â–€â–„â–€â–„â–€â–„â–€ è¿™ä¸ªæ¯”è¾ƒæœ‰è¶£ï¼Œæ˜¯ä¸€ä¸ªæ£‹ç›˜ï¼Œè®²è§£ä¸€ä¸‹ï¼š\nè¿™ä¸ªæ£‹ç›˜ç”±16ä¸ªâ€œâ–„â–€â€ç»„æˆï¼Œæ¯ä¸ªâ€œâ–„â–€â€åœ¨ä»£ç ä¸­ç”¨ä¸€ä¸ªCellè¡¨ç¤ºï¼Œå¯¹äºæ¯ä¸ªCell:\n1 Cell c = {0xE2, 0x96, 0x84, 0xE2, 0x96, 0x80, 0, 0}; 0xE2, 0x96, 0x84æ‰“å°å‡ºæ¥å°±æ˜¯â€œâ–„â€ï¼Œè€Œ0xE2, 0x96, 0x80æ‰“å°å‡ºæ¥å°±æ˜¯â€œâ–€â€ï¼Œ 0, 0ç¡®ä¿å­—ç¬¦ä¸²ä»¥ç©ºå­—ç¬¦ç»“å°¾ï¼Œå› ä¸ºä»£ç ä¸­ä½¿ç”¨äº†data()æ–¹æ³•ã€‚\n2.5. å…ƒç´ äº¤æ¢ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include \u0026lt;array\u0026gt; #include \u0026lt;iostream\u0026gt; /* * é‡è½½â€œ\u0026lt;\u0026lt;â€ */ template\u0026lt;class Os, class V\u0026gt; Os\u0026amp; operator\u0026lt;\u0026lt;(Os\u0026amp; os, const V\u0026amp; v) { os \u0026lt;\u0026lt; \u0026#39;{\u0026#39;; for (auto i : v) os \u0026lt;\u0026lt; \u0026#39; \u0026#39; \u0026lt;\u0026lt; i; return os \u0026lt;\u0026lt; \u0026#34; } \u0026#34;; } int main() { std::array\u0026lt;int, 3\u0026gt; a1{1, 2, 3}, a2{4, 5, 6}; auto it1 = a1.begin(); auto it2 = a2.begin(); int\u0026amp; ref1 = a1[1]; int\u0026amp; ref2 = a2[1]; std::cout \u0026lt;\u0026lt; a1 \u0026lt;\u0026lt; a2 \u0026lt;\u0026lt; \u0026#39;\\n\u0026#39;; a1.swap(a2); std::cout \u0026lt;\u0026lt; a1 \u0026lt;\u0026lt; a2 \u0026lt;\u0026lt; \u0026#39;\\n\u0026#39;; } è¿™é‡Œç®€å•ä»‹ç»ä»¥ä¸‹â€œ\u0026laquo;â€çš„å·¥ä½œåŸç†ï¼š\n1 template\u0026lt;class Os, class V\u0026gt; Os\u0026amp; operator\u0026lt;\u0026lt;(Os\u0026amp; os, const V\u0026amp; v) å‡½æ•°æ¨¡æ¿ï¼Œæ ¹æ®ä¼ é€’çš„å‚æ•°è¿›è¡Œæ¨å¯¼ï¼Œå®ä¾‹åŒ–æ¨¡æ¿å‡½æ•°ï¼Œè¿”å›Oså¼•ç”¨ï¼Œä»¥ä¾¿äºé“¾å¼è°ƒç”¨ï¼š\n1 operator\u0026lt;\u0026lt;(operator\u0026lt;\u0026lt;(std::cout, a1), a2); 2.6. æ¯”è¾ƒ 1 2 operator== (C++11) operator\u0026lt;=\u0026gt; (C++20) 2.6.1. operator== 1 2 3 // (since C++11) (constexpr since C++20) template\u0026lt; class T, std::size_t N \u0026gt; bool operator==( const std::array\u0026lt;T, N\u0026gt;\u0026amp; lhs, const std::array\u0026lt;T, N\u0026gt;\u0026amp; rhs ); è¦æ±‚åŒæ–¹ç±»å‹ç›¸åŒã€‚\n1 2 std::array\u0026lt;int, 3\u0026gt; x; std::array\u0026lt;int, 4\u0026gt; y; xå’Œyçš„ç±»å‹ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½æ¯”è¾ƒã€‚\n2.6.2. operator\u0026lt;=\u0026gt; ç”¨æ³•è§ã€Šé€»è¾‘æ¯”è¾ƒã€‹ã€‚\n","date":"2025-05-04T00:03:33+08:00","permalink":"https://zuoco.github.io/p/%E7%AC%AC3%E8%8A%82-%E5%BA%8F%E5%88%97%E5%AE%B9%E5%99%A8%E4%B9%8Barray/","title":"ç¬¬3èŠ‚ - åºåˆ—å®¹å™¨ä¹‹Array"},{"content":"1. æ¦‚è¿° ","date":"2025-05-04T00:01:49+08:00","image":"https://zuoco.github.io/p/%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91%E5%A4%9C%E6%99%AF-%E6%98%9F%E7%A9%BA-%E6%9C%88%E4%BA%AE_hu_61f7f66a3bd8c453.png","permalink":"https://zuoco.github.io/p/%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","title":"åŠ¨æ€å†…å­˜ç®¡ç†"},{"content":"1. éæ ¼å¼åŒ–IO éæ ¼å¼åŒ–IOä¸æ¶‰åŠæ•°æ®è¡¨ç¤ºå½¢å¼çš„å˜åŒ–ã€‚\néæ ¼å¼åŒ–è¾“å…¥ï¼š getã€readã€getlineã€gcount\næ ¼å¼åŒ–è¾“å‡ºï¼š putã€write\n2. æ ¼å¼åŒ–IO ä½¿ç”¨ç§»ä½æ“ä½œç¬¦ï¼ˆâ€œ\u0026laquo;â€ã€â€œ\u0026raquo;â€ï¼‰æ¥è¿›è¡Œæ ¼å¼åŒ–è¾“å‡ºï¼Œç±»å‹é€šè¿‡é‡è½½ç§»ä½æ“ä½œç¬¦æ¥æä¾›æ ¼å¼åŒ–IOåŠŸèƒ½ã€‚\n2.1. æ ¼å¼æ§åˆ¶ ä½æ©ç ç±»å‹\n1 2 3 4 5 6 7 8 9 int main() { int x = 888; int y = -888; char z = \u0026#39;6\u0026#39;; std::cout.setf(std::ios_base::showpos); std::cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; y \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; z \u0026lt;\u0026lt; std::endl; // showposå¯¹äºcharç±»å‹æ— æ•ˆ } è¾“å‡ºï¼š\n+999\n-888\n6\nè¾“å‡ºå®½åº¦æ§åˆ¶ 1 2 3 4 5 6 7 int main() { int x = 100; std::cout.width(10); std::cout.setf(std::ios_base::showpos); std::cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; std::endl; } // è¾“å‡ºï¼Œ ä»¥ç©ºæ ¼å¡«å……ï¼š +100 1 2 3 4 5 6 7 8 int main() { int x = 100; std::cout.width(10); // è§¦å‘åå°±ä¼šè¢«é‡ç½®ä¸º0 std::cout.fill(\u0026#39;.\u0026#39;); std::cout.setf(std::ios_base::showpos); std::cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; std::endl; } // è¾“å‡º: ......+100 æ“çºµç¬¦ 1 2 3 4 5 6 7 8 9 10 #include \u0026lt;iostream\u0026gt; #include \u0026lt;iomanip\u0026gt; int main() { int x = 666; int y = 888; // std::setw()å‡ºå‘åå°±ä¼šè¢«é‡ç½® std::cout \u0026lt;\u0026lt; std::showpos \u0026lt;\u0026lt; std::setw(10) \u0026lt;\u0026lt; x \u0026lt;\u0026lt; std::setw(10) \u0026lt;\u0026lt; y \u0026lt;\u0026lt; std::endl; } ","date":"2020-09-09T00:00:00Z","image":"https://zuoco.github.io/p/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/aaa_hu_2ce571a144f0c271.jpg","permalink":"https://zuoco.github.io/p/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/","title":"è¾“å…¥è¾“å‡º"}]
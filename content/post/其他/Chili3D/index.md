---
title: "Chili 3D"
description: "一款开源的WebCAD"
date: 2024-12-03
image: "image.png"
math: 
license: 
hidden: false
comments: true
draft: true
categories:
  - CAD
---



- [1. 项目概述](#1-项目概述)
- [2. 项目功能](#2-项目功能)
  - [2.1. 核心CAD功能](#21-核心cad功能)
  - [2.2. 用户界面功能](#22-用户界面功能)
- [3. 技术栈](#3-技术栈)
  - [3.1. 前端技术](#31-前端技术)
  - [3.2. 后端技术](#32-后端技术)
  - [3.3. 开发工具](#33-开发工具)
- [4. 架构设计](#4-架构设计)
  - [4.1. 总体架构](#41-总体架构)
  - [4.2. 命令系统架构](#42-命令系统架构)
  - [4.3. 文档管理架构](#43-文档管理架构)
- [5. 模块设计](#5-模块设计)
  - [5.1. 核心模块（packages目录结构）](#51-核心模块packages目录结构)
  - [5.2. C++模块](#52-c模块)
- [6. 技术特点](#6-技术特点)



# 1. 项目概述

Chili3D 是一个基于Web的3D CAD建模应用程序，提供完整的计算机辅助设计功能。该项目采用现代Web技术栈，结合了高性能的几何内核和直观的用户界面。

# 2. 项目功能

## 2.1. 核心CAD功能
Chili3D 提供了全面的CAD建模工具，包括：    

- **草图绘制工具**：线条、弧线、圆形、矩形等基础图形绘制功能。   
- **3D建模操作**：拉伸(Extrude)、旋转(Revolve)、扫掠等高级建模命令。     
- **几何修改工具**：变换、编辑、修改等几何操作命令。   
- **3D可视化**：基于Three.js的实时3D渲染和交互。   

## 2.2. 用户界面功能
- **Office风格界面**：采用Ribbon界面设计，提供直观的工具访问方式。     
- **主窗口管理**：完整的应用程序窗口和面板管理系统。      
- **多语言支持**：国际化界面，支持多种语言。

# 3. 技术栈

## 3.1. 前端技术
- **主要语言**：TypeScript - 提供类型安全的开发环境。   
- **3D渲染引擎**：Three.js - 负责浏览器端的3D图形渲染。     
- **几何内核**：OpenCascade - 通过WebAssembly编译的CAD几何内核。    
- **构建工具**：Rspack - 现代化的打包工具。    

## 3.2. 后端技术
- **WebAssembly**：将OpenCascade C++库编译为WebAssembly模块。    
- **Emscripten**：用于C++到WebAssembly的编译工具链。    

## 3.3. 开发工具
- **包管理**：采用monorepo架构，管理多个相关包。    
- **测试框架**：Jest - 用于单元测试。     
- **构建系统**：CMake - 用于C++模块的构建配置。    

# 4. 架构设计

## 4.1. 总体架构
Chili3D 采用分层架构和依赖注入模式，确保各组件间的松耦合：

- **应用程序容器**：`Application`类作为依赖注入容器和服务容器。    
- **应用构建器**：`AppBuilder`类实现构建器模式，负责应用程序的初始化和依赖配置。    
- **核心接口**：`IApplication`接口定义了应用程序容器的规范。    

## 4.2. 命令系统架构
- **命令模式**：所有CAD操作都通过命令模式实现，支持撤销/重做
- **Ribbon界面**：命令按功能分组组织在Ribbon界面中。     

## 4.3. 文档管理架构
- **文档模型**：`IDocument`接口管理3D场景数据。     
- **几何节点**：如`RevolvedNode`等类表示文档中的几何对象。    

# 5. 模块设计

## 5.1. 核心模块（packages目录结构）
项目采用monorepo结构，包含以下主要模块：

1. **chili-core** - 核心抽象层
   - 包含基础接口定义、数学运算、模型管理等核心功能。    

2. **chili** - 主应用模块
   - 实现具体的应用逻辑和命令系统。     

3. **chili-ui** - 用户界面模块
   - 实现Ribbon界面、主窗口、编辑器等UI组件。    

4. **chili-three** - Three.js集成模块
   - 负责3D渲染和可视化功能

5. **chili-wasm** - WebAssembly接口模块
   - 提供OpenCascade几何内核的TypeScript绑定。    

6. **chili-builder** - 应用构建模块
   - 提供应用程序的构建和配置功能

7. **chili-web** - Web入口模块
   - 应用程序的Web端入口点。     

8. **其他支持模块**：
   - `chili-geo` - 几何处理
   - `chili-storage` - 数据存储
   - `chili-vis` - 可视化支持
   - `chili-controls` - 控件库

## 5.2. C++模块
- **cpp目录** - 包含OpenCascade的C++包装代码。    
- **CMake构建系统** - 配置WebAssembly编译

# 6. 技术特点

1. **模块化设计**：清晰的模块分离，便于维护和扩展
2. **依赖注入**：使用依赖注入模式，提高代码的可测试性和可维护性
3. **类型安全**：全TypeScript开发，提供完整的类型检查
4. **高性能几何计算**：集成OpenCascade专业CAD内核
5. **现代Web技术**：利用WebAssembly实现高性能计算
6. **用户友好界面**：Office风格的Ribbon界面设计



